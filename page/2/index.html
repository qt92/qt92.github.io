<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>前端笔记 (front-end)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="前端开发爱好者QT的工作笔记">
<meta name="keywords" content="前端迷,前端开发,前端知识大全,前端优化,前端导航,小程序,JavaScript,ajax,angular,css,webpack,react,gulp,htmlhtml5,mocha,nginx,node,css3,vue,vue-cli,scss">
<meta property="og:type" content="website">
<meta property="og:title" content="前端笔记 (front-end)">
<meta property="og:url" content="https://qt92.github.io/page/2/index.html">
<meta property="og:site_name" content="前端笔记 (front-end)">
<meta property="og:description" content="前端开发爱好者QT的工作笔记">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="前端笔记 (front-end)">
<meta name="twitter:description" content="前端开发爱好者QT的工作笔记">
  
    <link rel="alternate" href="/atom.xml" title="前端笔记 (front-end)" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">前端笔记 (front-end)</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">欢迎投稿，投稿QQ：786758593(邮箱同Q)</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://qt92.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-NodeJS连接MySQL时遇到的问题 Error Connection lost The server closed the connection" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/09/07/NodeJS连接MySQL时遇到的问题 Error Connection lost The server closed the connection/" class="article-date">
  <time datetime="2018-09-07T07:54:30.000Z" itemprop="datePublished">2018-09-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/09/07/NodeJS连接MySQL时遇到的问题 Error Connection lost The server closed the connection/">NodeJS连接MySQL时遇到的问题 Error Connection lost The server closed the connection.</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天用NodeJS连接Mysql时遇到点折磨人的问题，记录下解决方法。</p>
<p>NodeJS和Mysql都已经正确安装了，但是NodeJS和Mysql的连接出现问题，查找网上一些解决办法都不能解决问题。<br>报错如下：<br><img src="https://user-images.githubusercontent.com/22697565/45206239-1cfe7e80-b2b7-11e8-96d3-c104fa5c7b14.png" alt="image"></p>
<p>经过查找定位，在mysql官网找到了解决方案：</p>
<p><a href="https://dev.mysql.com/doc/dev/connector-nodejs/8.0/" target="_blank" rel="noopener">官网链接 》》MySQL Connector/Node.js</a><br>MySql 针对node的连接器对mysql的版本有要求，且需要另外的插件：</p>
<p><img src="https://user-images.githubusercontent.com/22697565/45206324-520ad100-b2b7-11e8-8814-8d6d5b2fb7ae.png" alt="image"></p>
<p>然后下载的最新版的mysql mysql-installer-community-5.7.20.0.msi</p>
<p>执行 :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install mysql</span><br><span class="line"></span><br><span class="line">npm install @mysql/xdevapi</span><br></pre></td></tr></table></figure></p>
<p>运行<a href="https://github.com/mysqljs/mysql#introduction" target="_blank" rel="noopener">官方示例</a>，成功。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://qt92.github.io/2018/09/07/NodeJS连接MySQL时遇到的问题 Error Connection lost The server closed the connection/" data-id="cjnhgouo30002lwlo88dvhna5" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/node/">node</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-小邵教你玩转es6" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/09/07/小邵教你玩转es6/" class="article-date">
  <time datetime="2018-09-07T02:57:11.000Z" itemprop="datePublished">2018-09-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/好文分享/">好文分享</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/09/07/小邵教你玩转es6/">ES6学习笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>前言：大家好，我叫邵威儒，大家都喜欢喊我小邵，学的金融专业却凭借兴趣爱好入了程序猿的坑，从大学买的第一本vb和自学vb，我就与编程结下不解之缘，随后自学易语言写游戏辅助、交易软件，至今进入了前端领域，看到不少朋友都写文章分享，自己也弄一个玩玩，以下文章纯属个人理解，便于记录学习，肯定有理解错误或理解不到位的地方，意在站在前辈的肩膀，分享个人对技术的通俗理解，共同成长！</p>
<blockquote>
<p>后续我会陆陆续续更新javascript方面，尽量把javascript这个学习路径体系都写一下<br>包括前端所常用的es6、angular、react、vue、nodejs、koa、express、公众号等等<br>都会从浅到深，从入门开始逐步写，希望能让大家有所收获，也希望大家关注我~</p>
</blockquote>
<blockquote>
<p>文章列表：<a href="https://juejin.im/user/5a84f871f265da4e82634f2d/posts" target="_blank" rel="noopener">https://juejin.im/user/5a84f871f265da4e82634f2d/posts</a></p>
</blockquote>
<blockquote>
<p>Author: 邵威儒<br>Email: <a href="mailto:166661688@qq.com" target="_blank" rel="noopener">166661688@qq.com</a><br>Wechat: 166661688<br>github: <a href="https://github.com/iamswr/" target="_blank" rel="noopener">https://github.com/iamswr/</a></p>
</blockquote>
<hr>
<p>接下来我主要给大家讲下我对常用的es6的理解，我们工作当中，其实有很多用不上的，如果想详细了解的话可以看看阮一峰老师的es6：<a href="http://es6.ruanyifeng.com/" target="_blank" rel="noopener">http://es6.ruanyifeng.com/</a>  </p>
<p>这篇文章主要让你学会工作当中常用的es6技巧，以及扩展如实现数据双向绑定，class用es5如何实现、如何给伪数组添加迭代器等等。</p>
<hr>
<h1 id="var、let、const"><a href="#var、let、const" class="headerlink" title="var、let、const"></a>var、let、const</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">// 1.var存在变量作用域的提升</span><br><span class="line">console.log(a) // 打印输出 undefined</span><br><span class="line">var a = 1</span><br><span class="line"></span><br><span class="line">// 怎么理解作用域的提升呢？</span><br><span class="line">// var str = &apos;hello swr&apos;</span><br><span class="line">// function()&#123;</span><br><span class="line">//     console.log(str) // 打印输出 undefined</span><br><span class="line">//     var str = &apos;goodbye swr&apos;</span><br><span class="line">// &#125;</span><br><span class="line">// test()</span><br><span class="line"></span><br><span class="line">// 上面这段代码实际上是</span><br><span class="line">var str = &apos;hello swr&apos;</span><br><span class="line">function()&#123;</span><br><span class="line">    var str</span><br><span class="line">    console.log(str) // 打印输出undefined</span><br><span class="line">                     // 实际上就是var声明的变量，拿到</span><br><span class="line">                     // 当前作用域的最顶层，而此时尚未赋值</span><br><span class="line">                     // 只是声明，所以打印出undefined，而非当运行</span><br><span class="line">                     // 到这段代码时才声明，优先声明，</span><br><span class="line">                     // 当运行到那行的时候，实际上是赋值</span><br><span class="line">                     // 同样的，function xx()&#123;&#125;也存在作用域提升</span><br><span class="line">    str = &apos;goodbye swr&apos;</span><br><span class="line">&#125;</span><br><span class="line">test()</span><br><span class="line"></span><br><span class="line">// var 不存在块级作用域的概念</span><br><span class="line">// 我的理解是在es6之前，是没有块级作用域的概念，</span><br><span class="line">// 变量只有遇到函数的时候才会变为局部变量</span><br><span class="line">&#123;</span><br><span class="line">    var str 1 = &apos;hello swr&apos;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(str1) // 打印输出 hello swr</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">// 2.let</span><br><span class="line">// 2.1 不存在变量作用域提升，这样可以避免了我们还没声明变量就拿变量来用</span><br><span class="line">// 2.2 同一作用域的同一个变量不能够重复声明，避免我们重复声明变量</span><br><span class="line">// 2.3 let声明的变量不会到全局上</span><br><span class="line">// 2.4 let和代码块&#123;&#125;结合使用会形成块级作用域</span><br><span class="line"></span><br><span class="line">// 2.1</span><br><span class="line">// console.log(a) // 报错，a未声明</span><br><span class="line">// let a = &apos;hello swr&apos;</span><br><span class="line"></span><br><span class="line">// 2.2</span><br><span class="line">// let a = &apos;hello swr&apos;</span><br><span class="line">// let a = &apos;hello swr&apos; // 报错，变量被重复声明</span><br><span class="line"></span><br><span class="line">// 2.3</span><br><span class="line">// let a = &apos;hello swr&apos;</span><br><span class="line">// console.log(window.a) // undefined</span><br><span class="line"></span><br><span class="line">// 2.4</span><br><span class="line">// 在代码块以外调用str2，会报错</span><br><span class="line">&#123;</span><br><span class="line">    let str2 = &apos;hello swr&apos;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(str2) // 报错，未找到变量</span><br><span class="line"></span><br><span class="line">// 上面这种写法，也有点类型es6之前的立即执行函数</span><br><span class="line">(function()&#123;</span><br><span class="line">    var str2 = &apos;hello swr&apos;</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line">// 一个例子</span><br><span class="line">// 使用var，会发现最终console.log中打印的i都是3</span><br><span class="line">// 因为for循环不是函数，而此时var i是处于全局当中</span><br><span class="line">// for循环是同步代码，所以会执行完同步代码后</span><br><span class="line">// 再执行setTimeout的异步代码，此时i已为3，所以打印出来都是3</span><br><span class="line">for(var i = 0;i &lt; 3;i++)&#123;</span><br><span class="line">    setTimeout(function()&#123;</span><br><span class="line">        console.log(i)</span><br><span class="line">    &#125;,1000)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 那么我们用let试下</span><br><span class="line">// let和代码块结合起来使用会形成块级作用域</span><br><span class="line">// 那么当for时，这3个setTimeout会分别在3个不同的块级作用域</span><br><span class="line">// 当执行setTimeout的console.log(i)时，会先寻找最近的块级作用域中的i</span><br><span class="line">// 所以会依次打印出0 1 2</span><br><span class="line">for(let j = 0;j &lt; 3;j++)&#123;</span><br><span class="line">    setTimeout(function()&#123;</span><br><span class="line">        console.log(i)</span><br><span class="line">    &#125;,1000)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// 3.const</span><br><span class="line">// 3.1 const和let基本上可以说是完全一致的，但是const声明的对象不能更改其指向的引用地址（即堆区）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 3.1</span><br><span class="line">// 当用普通值赋值给const声明的变量后，再重新赋值时</span><br><span class="line">// 值引用会被更改，所以会报错</span><br><span class="line">const STR1 = &apos;hello swr&apos;</span><br><span class="line">STR1 = &apos;goodbye swr&apos; // 报错,Assignment to constant variable</span><br><span class="line"></span><br><span class="line">// 当我们修改这个引用地址里面的内容时，则不会报错</span><br><span class="line">// 因为这个变量是指向这个引用地址的</span><br><span class="line">const OBJ = &#123;name:&quot;swr&quot;&#125;</span><br><span class="line">OBJ.name = &apos;hello swr&apos;</span><br><span class="line">console.log(OBJ) // &#123;name:&quot;hello swr&quot;&#125;</span><br><span class="line">// 但是当我们把这个变量重新赋值一个引用地址时，则会报错</span><br><span class="line">OBJ = &#123;&#125; // 报错</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h1><p>解构赋值主要分为对象的解构和数组的解构，在没有解构赋值的时候，我们赋值是这样的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let arr = [0,1,2]</span><br><span class="line">let a = arr[0]</span><br><span class="line">let b = arr[1]</span><br><span class="line">let c = arr[2]</span><br></pre></td></tr></table></figure></p>
<p>这样写很繁琐，那么我们有没办法既声明，又赋值，更优雅的写法呢？肯定是有的，那就是解构赋值，解构赋值，简单理解就是等号的左边和右边相等。</p>
<h3 id="数组的解构赋值"><a href="#数组的解构赋值" class="headerlink" title="数组的解构赋值"></a>数组的解构赋值</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let arr = [0,1,2]</span><br><span class="line">let [a,b,c] = arr</span><br><span class="line">console.log(a) // 0</span><br><span class="line">console.log(b) // 1</span><br><span class="line">console.log(c) // 2</span><br></pre></td></tr></table></figure>
<p>但是很多时候，数据并非一一对应的，并且我们希望得到一个默认值<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let arr = [,1,2]</span><br><span class="line">let [a=&apos;我是默认值&apos;,b,c] = arr</span><br><span class="line">console.log(a) // &apos;我是默认值&apos;</span><br><span class="line">console.log(b) // 1</span><br><span class="line">console.log(c) // 2</span><br><span class="line">// 从这个例子可以看出，在解构赋值的过程中，a=undefined时，会使用默认值</span><br><span class="line">// 那么当a=null时呢？当a=null时，那么a就不会使用默认值，而是使用null</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 数组的拼接</span><br><span class="line">let a = [0,1,2]</span><br><span class="line">let b = [3,4,5]</span><br><span class="line">let c = a.concat(b)</span><br><span class="line">console.log(c) // [0,1,2,3,4,5]</span><br><span class="line"></span><br><span class="line">let d = [...a,...b]</span><br><span class="line">console.log(d) // [0,1,2,3,4,5]</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// 数组的克隆</span><br><span class="line">// 假如我们简单地把一个数组赋值给另外一个变量</span><br><span class="line">let a = [0,1,2,3]</span><br><span class="line">let b = a</span><br><span class="line">b.push(4)</span><br><span class="line">console.log(a) // [0,1,2,3,4]</span><br><span class="line">console.log(b) // [0,1,2,3,4]</span><br><span class="line">// 因为这只是简单的把引用地址赋值给b，而不是重新开辟一个内存地址，所以</span><br><span class="line">// a和b共享了同一个内存地址，该内存地址的更改，会影响到所有引用该地址的变量</span><br><span class="line">// 那么用下面的方法，把数组进行克隆一份，互不影响</span><br><span class="line"></span><br><span class="line">let a = [0,1,2,3]</span><br><span class="line">let b = [...a]</span><br><span class="line">b.push(4)</span><br><span class="line">console.log(a) // [0,1,2,3]</span><br><span class="line">console.log(b) // [0,1,2,3,4]</span><br></pre></td></tr></table></figure>
<h3 id="对象的解构赋值"><a href="#对象的解构赋值" class="headerlink" title="对象的解构赋值"></a>对象的解构赋值</h3><p>对象的解构赋值和数组的解构赋值其实类似，但是数组的数组成员是有序的<br>而对象的属性则是无序的，所以对象的解构赋值简单理解是等号的左边和右边的结构相同<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let &#123;name,age&#125; = &#123;name:&quot;swr&quot;,age:28&#125;</span><br><span class="line">console.log(name) // &apos;swr&apos;</span><br><span class="line">console.log(age) // 28</span><br></pre></td></tr></table></figure></p>
<p>对象的解构赋值是根据key值进行匹配<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 这里可以看出，左侧的name和右侧的name，是互相匹配的key值</span><br><span class="line">// 而左侧的name匹配完成后，再赋值给真正需要赋值的Name</span><br><span class="line">let &#123; name:Name,age &#125; = &#123; name:&apos;swr&apos;,age:28 &#125;</span><br><span class="line">console.log(Name) // &apos;swr&apos;</span><br><span class="line">console.log(age) // 28</span><br></pre></td></tr></table></figure></p>
<p>那么当变量已经被声明了呢？<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let name,age</span><br><span class="line">// 需要用圆括号，包裹起来</span><br><span class="line">(&#123;name,age&#125; = &#123;name:&quot;swr&quot;,age:28&#125;)</span><br><span class="line">console.log(name) // &apos;swr&apos;</span><br><span class="line">console.log(age) // 28</span><br></pre></td></tr></table></figure></p>
<p>变量能否也设置默认值？<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let &#123;name=&quot;swr&quot;,age&#125; = &#123;age:28&#125;</span><br><span class="line">console.log(name) // &apos;swr&apos;</span><br><span class="line">console.log(age) // 28</span><br><span class="line">// 这里规则和数组的解构赋值一样，当name = undefined时，则会使用默认值</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let [a] = [&#123;name:&quot;swr&quot;,age:28&#125;]</span><br><span class="line">console.log(a) // &#123;name:&quot;swr&quot;,age:28&#125;</span><br><span class="line"></span><br><span class="line">let &#123; length &#125; = &quot;hello swr&quot;</span><br><span class="line">console.log(length) // 9</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function ajax(&#123;method,url,type=&apos;params&apos;&#125;)&#123;</span><br><span class="line">    console.log(method) // &apos;get&apos;</span><br><span class="line">    console.log(url) // &apos;/&apos;</span><br><span class="line">    console.log(type) // &apos;params&apos;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ajax(&#123;method:&quot;get&quot;,url:&quot;/&quot;&#125;)</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="扩展运算符"><a href="#扩展运算符" class="headerlink" title="扩展运算符"></a>扩展运算符</h3><p>我们先看下代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 在以往，我们给函数传不确定参数数量时，是通过arguments来获取的</span><br><span class="line">function sum() &#123;</span><br><span class="line">  console.log(arguments) // &#123; &apos;0&apos;: 1, &apos;1&apos;: 2, &apos;2&apos;: 3, &apos;3&apos;: 4, &apos;4&apos;: 5, &apos;5&apos;: 6 &#125;</span><br><span class="line">                         // 我们可以看出，arguments不是一个数组，而是一个伪数组</span><br><span class="line">  let total = 0</span><br><span class="line">  let &#123; length &#125; = arguments</span><br><span class="line">  for(let i = 0;i &lt; length;i++)&#123;</span><br><span class="line">    total += arguments[i]</span><br><span class="line">  &#125;</span><br><span class="line">  return total</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(sum(1,2,3,4,5,6)) // 21</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 接下来我们用扩展运算符看看</span><br><span class="line">function sum(...args)&#123; // 使用...扩展运算符</span><br><span class="line">    console.log(args) // [ 1, 2, 3, 4, 5, 6 ] args是一个数组</span><br><span class="line">    return eval(args.join(&apos;+&apos;))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(sum(1,2,3,4,5,6)) // 21</span><br></pre></td></tr></table></figure>
<p>得到的args是一个数组，直接对数组进行操作会比对伪数组进行操作更加方便，还有一些注意点需要注意<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// 正确的写法 扩展运算符只能放在最后一个参数</span><br><span class="line">function sum(a,b,...args)&#123;</span><br><span class="line">    console.log(a) // 1</span><br><span class="line">    console.log(b) // 2</span><br><span class="line">    console.log(args) // [ 3, 4, 5, 6 ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sum(1,2,3,4,5,6)</span><br><span class="line"></span><br><span class="line">// 错误的写法 扩展运算符只能放在最后一个参数</span><br><span class="line">function sum(...args,a,b)&#123;</span><br><span class="line">    // 报错</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sum(1,2,3,4,5,6)</span><br></pre></td></tr></table></figure></p>
<p>我们可以对比下扩展运算符的方便之处<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 以往我们是这样拼接数组的</span><br><span class="line">let arr1 = [1,2,3]</span><br><span class="line">let arr2 = [4,5,6]</span><br><span class="line">let arr3 = arr1.concat(arr2)</span><br><span class="line">console.log(arr3) // [ 1, 2, 3, 4, 5, 6 ]</span><br><span class="line"></span><br><span class="line">// 现在我们用扩展运算符看看</span><br><span class="line">let arr1 = [1,2,3]</span><br><span class="line">let arr2 = [4,5,6]</span><br><span class="line">let arr3 = [...arr1,...arr2]</span><br><span class="line">console.log(arr3) // [ 1, 2, 3, 4, 5, 6 ]</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 以往我们这样来取数组中最大的值</span><br><span class="line">function max(...args)&#123;</span><br><span class="line">    return Math.max.apply(null,args)</span><br><span class="line">&#125;</span><br><span class="line">console.log(max(1,2,3,4,5,6)) // 6</span><br><span class="line"></span><br><span class="line">// 现在我们用扩展运算符看看</span><br><span class="line">function max(...args)&#123;</span><br><span class="line">    return Math.max(...args) // 把args [1,2,3,4,5,6]展开为1,2,3,4,5,6</span><br><span class="line">&#125;</span><br><span class="line">console.log(max(1,2,3,4,5,6)) // 6</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// 扩展运算符可以把argument转为数组</span><br><span class="line">function max()&#123;</span><br><span class="line">    console.log(arguments) // &#123; &apos;0&apos;: 1, &apos;1&apos;: 2, &apos;2&apos;: 3, &apos;3&apos;: 4, &apos;4&apos;: 5, &apos;5&apos;: 6 &#125;</span><br><span class="line">    let arr = [...arguments]</span><br><span class="line">    console.log(arr) // [1,2,3,4,5,6]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">max(1,2,3,4,5,6)</span><br><span class="line"></span><br><span class="line">// 但是扩展运算符不能把伪数组转为数组（除了有迭代器iterator的伪数组，如arguments）</span><br><span class="line">let likeArr = &#123; &quot;0&quot;:1,&quot;1&quot;:2,&quot;length&quot;:2 &#125;</span><br><span class="line">let arr = [...likeArr] // 报错 TypeError: likeArr is not iterable</span><br><span class="line"></span><br><span class="line">// 但是可以用Array.from把伪数组转为数组</span><br><span class="line">let likeArr = &#123; &quot;0&quot;:1,&quot;1&quot;:2,&quot;length&quot;:2 &#125;</span><br><span class="line">let arr = Array.from(likeArr)</span><br><span class="line">console.log(arr) // [1,2]</span><br></pre></td></tr></table></figure>
<p>对象也可以使用扩展运算符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// 以往我们这样合并对象</span><br><span class="line">let name = &#123; name:&quot;邵威儒&quot; &#125;</span><br><span class="line">let age = &#123; age:28 &#125;</span><br><span class="line">let person = &#123;&#125;</span><br><span class="line">Object.assign(person,name,age)</span><br><span class="line">console.log(person) // &#123; name: &apos;邵威儒&apos;, age: 28 &#125;</span><br><span class="line"></span><br><span class="line">// 使用扩展运算符</span><br><span class="line">let name = &#123; name:&quot;邵威儒&quot; &#125;</span><br><span class="line">let age = &#123; age:28 &#125;</span><br><span class="line">let person = &#123;...name,...age&#125;</span><br><span class="line">console.log(person) // &#123; name: &apos;邵威儒&apos;, age: 28 &#125;</span><br></pre></td></tr></table></figure>
<p>需要注意的是，通过扩展运算符和Object.assign对对象进行合并的行为，是属于浅拷贝，那么我们在开发当中，经常需要对对象进行深拷贝，接下来我们看看如何进行深拷贝。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// 方法一：利用JSON.stringify和JSON.parse</span><br><span class="line">let swr = &#123;</span><br><span class="line">    name:&quot;邵威儒&quot;,</span><br><span class="line">    age:28</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let swrcopy = JSON.parse(JSON.stringify(swr))</span><br><span class="line">console.log(swrcopy) // &#123; name:&quot;邵威儒&quot;,age:28 &#125;</span><br><span class="line">// 此时我们修改swr的属性</span><br><span class="line">swr.age = 29</span><br><span class="line">console.log(swr) // &#123; name:&quot;邵威儒&quot;,age:29 &#125;</span><br><span class="line">// 但是swrcopy却不会受swr影响</span><br><span class="line">console.log(swrcopy) // &#123; name:&quot;邵威儒&quot;,age:28 &#125;</span><br><span class="line">// 这种方式进行深拷贝，只针对json数据这样的键值对有效</span><br><span class="line">// 对于函数等等反而无效，不好用，接着继续看方法二、三。</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">// 方法二：</span><br><span class="line">function deepCopy(fromObj,toObj) &#123; // 深拷贝函数</span><br><span class="line">  // 容错</span><br><span class="line">  if(fromObj === null) return null // 当fromObj为null</span><br><span class="line">  if(fromObj instanceof RegExp) return new RegExp(fromObj) // 当fromObj为正则</span><br><span class="line">  if(fromObj instanceof Date) return new Date(fromObj) // 当fromObj为Date</span><br><span class="line"></span><br><span class="line">  toObj = toObj || &#123;&#125;</span><br><span class="line">  </span><br><span class="line">  for(let key in fromObj)&#123; // 遍历</span><br><span class="line">    if(typeof fromObj[key] !== &apos;object&apos;)&#123; // 是否为对象</span><br><span class="line">      toObj[key] = fromObj[key] // 如果为普通值，则直接赋值</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">      toObj[key] = new fromObj[key].constructor // 如果为object，则new这个object指向的构造函数</span><br><span class="line">      deepCopy(fromObj[key],toObj[key]) // 递归</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  return toObj</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let dog = &#123;</span><br><span class="line">  name:&quot;小白&quot;,</span><br><span class="line">  sex:&quot;公&quot;,</span><br><span class="line">  firends:[</span><br><span class="line">    &#123;</span><br><span class="line">      name:&quot;小黄&quot;,</span><br><span class="line">      sex:&quot;母&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let dogcopy = deepCopy(dog)</span><br><span class="line">// 此时我们把dog的属性进行修改</span><br><span class="line">dog.firends[0].sex = &apos;公&apos;</span><br><span class="line">console.log(dog) // &#123; name: &apos;小白&apos;,</span><br><span class="line">                      sex: &apos;公&apos;,</span><br><span class="line">                      firends: [ &#123; name: &apos;小黄&apos;, sex: &apos;公&apos; &#125;] &#125;</span><br><span class="line">// 当我们打印dogcopy，会发现dogcopy不会受dog的影响</span><br><span class="line">console.log(dogcopy) // &#123; name: &apos;小白&apos;,</span><br><span class="line">                          sex: &apos;公&apos;,</span><br><span class="line">                          firends: [ &#123; name: &apos;小黄&apos;, sex: &apos;母&apos; &#125; ] &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">// 方法三：</span><br><span class="line">let dog = &#123;</span><br><span class="line">  name:&quot;小白&quot;,</span><br><span class="line">  sex:&quot;公&quot;,</span><br><span class="line">  firends:[</span><br><span class="line">    &#123;</span><br><span class="line">      name:&quot;小黄&quot;,</span><br><span class="line">      sex:&quot;母&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function deepCopy(obj) &#123;</span><br><span class="line">  if(obj === null) return null</span><br><span class="line">  if(typeof obj !== &apos;object&apos;) return obj</span><br><span class="line">  if(obj instanceof RegExp) return new RegExp(obj)</span><br><span class="line">  if(obj instanceof Date) return new Date(obj)</span><br><span class="line">  let newObj = new obj.constructor</span><br><span class="line">  for(let key in obj)&#123;</span><br><span class="line">    newObj[key] = deepCopy(obj[key])</span><br><span class="line">  &#125;</span><br><span class="line">  return newObj</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let dogcopy = deepCopy(dog)</span><br><span class="line">dog.firends[0].sex = &apos;公&apos;</span><br><span class="line">console.log(dogcopy)</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Object-defineProperty"><a href="#Object-defineProperty" class="headerlink" title="Object.defineProperty"></a>Object.defineProperty</h1><p>Object.defineProperty这个并不是es6的语法，这个是给一个对象，添加属性，但是目前框架很多实用这个方法，来实现数据劫持，也就是数据双向绑定</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 平时我们这样给一个对象添加属性</span><br><span class="line">let obj = &#123;str:&quot;hello swr&quot;&#125;</span><br><span class="line">obj.str = &apos;goodbye swr&apos;</span><br><span class="line">console.log(obj.str) // &apos;goodbye swr&apos;</span><br></pre></td></tr></table></figure>
<p>那么当我们想在给一个对象，读取值或写入值时，进行别的操作，该怎么做呢？<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// 使用Object.defineProperty()</span><br><span class="line">// 接收的第一个参数为对象，第二个参数为属性名，第三个参数为配置对象</span><br><span class="line">let obj = &#123;&#125;</span><br><span class="line">Object.defineProperty(obj,&apos;name&apos;,&#123;</span><br><span class="line">    enumerable:true,// 是否可枚举，默认值 true</span><br><span class="line">                    // 如果为false的话，打印这个obj对象，是看不到name这个属性</span><br><span class="line">    writable:true,  // 是否可写，默认值 true</span><br><span class="line">                    // 如果为false的话，给name赋值，不会生效</span><br><span class="line">    configurable:true, // 是否可配置（是否可删除），默认值 true</span><br><span class="line">                       // 如果为true，delete obj.name，再打印obj，则显示&#123;&#125;</span><br><span class="line">                       // 如果为false，delete obj.name，再打印obj,则显示&#123;name:undefined&#125;</span><br><span class="line">   value:&apos;swr&apos;, // name对应的值</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 上面的写法其实和下面的写法是一样的</span><br><span class="line">let obj = &#123;&#125;</span><br><span class="line">obj.name = &apos;swr&apos;</span><br></pre></td></tr></table></figure></p>
<p>那么既然一样，我们有必要写这么大串的代码吗？</p>
<p>其实核心是get和set，我们继续往下看<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// 需要注意的是，当使用get set时，则不能使用value和writable</span><br><span class="line">let obj = &#123;&#125;</span><br><span class="line">let str</span><br><span class="line">Object.defineProperty(obj,&apos;name&apos;,&#123;</span><br><span class="line">    enumerable:true,</span><br><span class="line">    configurable:true, </span><br><span class="line">    get()&#123; // 读，当我们读取时，则会执行到get，比如obj.name</span><br><span class="line">        // return &apos;swr&apos; // 当我们obj.name进行读取时，会返回&apos;swr&apos;</span><br><span class="line">        return str</span><br><span class="line">    &#125;,</span><br><span class="line">    set(newValue)&#123; // 写，当我们写入时，则会执行到set，比如obj.name = &apos;swr&apos;</span><br><span class="line">                   // 并且会把newValue作为参数传进去</span><br><span class="line">        str = newValue</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">obj.name = &apos;swr&apos; // 写入</span><br><span class="line">console.log(obj.name) // &apos;swr&apos;  // 读取</span><br></pre></td></tr></table></figure></p>
<p>这样一来，我们可以在get set函数中，写出对应的业务逻辑，</p>
<p>包括很多框架底层，例如<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 一般不再选择这样的写法</span><br><span class="line">Fn.prototype.xxx = xxx</span><br><span class="line"></span><br><span class="line">// 更多的是选择这样的写法</span><br><span class="line">// 这样的好处就是当读取值的时候，可以做一系列我们想做的事情</span><br><span class="line">Object.defineProperty(Fn.prototype,&apos;xxx&apos;,&#123;...&#125;)</span><br></pre></td></tr></table></figure></p>
<h2 id="那么我们实现数据双向绑定呢？"><a href="#那么我们实现数据双向绑定呢？" class="headerlink" title="那么我们实现数据双向绑定呢？"></a>那么我们实现数据双向绑定呢？</h2><p>这个问题在面试当中，会经常问这个问题，但是面试官更希望听到的是具体底层的实现方式，那么接下来我们也实现一下吧~ （ 简陋版的……(#^.^#)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;</span><br><span class="line">  &lt;title&gt;对象的数据双向绑定&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;input id=&apos;input&apos; type=&quot;&quot; name=&quot;&quot; value=&quot;&quot;&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    let el = document.getElementById(&apos;input&apos;) // 1. 获取输入框的dom节点</span><br><span class="line">    let obj = &#123; // 2. 创建一个对象</span><br><span class="line">      name: &quot;&quot;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function oberseve(obj) &#123; // 3. 对对象进行观察</span><br><span class="line">      if (typeof obj !== &apos;object&apos;) return // 3.1 判断参数是否为对象</span><br><span class="line">      for (let key in obj) &#123; // 3.2 对对象进行遍历，目的是为了把每个属性都设置get/set</span><br><span class="line">        defineReactive(obj, key, obj[key])</span><br><span class="line">        oberseve(obj[key]) // 3.3 obj[key] 有可能还是一个函数，需要递归，给obj[key]里的属性进行设置get/set</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function defineReactive(target, property, value) &#123; // 4. 使用Object.defineProperty</span><br><span class="line">      Object.defineProperty(target, property, &#123;</span><br><span class="line">        get() &#123;</span><br><span class="line">          el.value = value // 4.1 当读取时，把值赋值给input框</span><br><span class="line">          return value</span><br><span class="line">        &#125;,</span><br><span class="line">        set(newVal) &#123;</span><br><span class="line">          el.value = newVal // 4.1 当设置时，把赋值给input框</span><br><span class="line">          value = newVal</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    oberseve(obj) // 5.执行该函数，对obj对象里的属性进行设置get/set</span><br><span class="line">    el.addEventListener(&apos;input&apos;, function () &#123; // 6.给输入框绑定input事件</span><br><span class="line">      obj.name = this.value // 7.当输入框输入内容时，我们会把输入框的</span><br><span class="line">                            //   内容赋值给obj.name，触发obj.name的set方法</span><br><span class="line">    &#125;)</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>当我们在输入框输入内容时，再到控制台输入obj.name查看这个值时，会发现打印出”hello swr”</p>
<p><img src="https://user-gold-cdn.xitu.io/2018/8/23/165667de41433ef6?w=736&amp;h=592&amp;f=png&amp;s=37794" alt=""></p>
<p>当我们在控制台，给obj.name赋值时，会发现输入框的内容也会作出相应更改</p>
<p><img src="https://user-gold-cdn.xitu.io/2018/8/23/165667ee2ec6da30?w=590&amp;h=504&amp;f=png&amp;s=39703" alt=""></p>
<p>这样我们就实现了一个简陋版的数据双向绑定了，但是这也是有缺点的，这个只是针对对象进行了数据双向绑定,而尤大大的Vuejs就是基于Object.defineProperty实现的。</p>
<p>除了Object.defineProperty可以实现数据双向绑定之外，还有其他方式吗？</p>
<p>肯定是有其他方式可以实现的，利用es6的proxy代理也可以实现数据双向绑定，但是目前的框架还是比较少使用这种方式。</p>
<hr>
<h1 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h1><p>Proxy代理也可以进行数据劫持，但是和Object.defineProperty不同的是，Proxy是在数据外层套了个壳，然后通过这层壳访问内部的数据，目前Proxy支持13种方式。</p>
<p><img src="https://user-gold-cdn.xitu.io/2018/8/24/1656b6202ef1d745?w=1128&amp;h=1602&amp;f=png&amp;s=538332" alt=""></p>
<p>Proxy，我的理解是在数据外层套了个壳，然后通过这层壳访问内部的数据，就像下面的图</p>
<p><img src="https://user-gold-cdn.xitu.io/2018/8/29/16583897f9a176f8" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">let dog = &#123;</span><br><span class="line">  name:&quot;小黄&quot;,</span><br><span class="line">  firends:[&#123;</span><br><span class="line">    name:&quot;小红&quot;</span><br><span class="line">  &#125;]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 1.首先new一个Proxy对象</span><br><span class="line">let proxy = new Proxy(dog,&#123; // 2.参数一为需要代理的数据，参数二为上图可以代理的13种的配置对象</span><br><span class="line">    get(target,property)&#123; // 3.参数1为上面dog对象，参数2为dog的属性</span><br><span class="line">        console.log(&apos;get被监控到了&apos;)</span><br><span class="line">        return target[property]</span><br><span class="line">    &#125;,</span><br><span class="line">    set(target,property,value)&#123; // 4.参数1为上面dog对象，参数2为dog的属性，参数3为设置的新值</span><br><span class="line">                                // 有点类似Object.defineProperty</span><br><span class="line">        console.log(&apos;set被监控到了&apos;)</span><br><span class="line">        target[property] = value</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 那么接下来我们设置一下这个属性</span><br><span class="line">// dog.name = &apos;小红&apos;  // set值时，发现不会打印 &apos;set被监控到了&apos;</span><br><span class="line">// dog.name // get值时，发现不会打印 &apos;get被监控到了&apos;</span><br><span class="line"></span><br><span class="line">// 思考：为什么在set/get值的时候不会打印出来我们需要的东西呢？</span><br><span class="line"></span><br><span class="line">// 上面说得很明白了，proxy相当于是一个壳，代理我们需要监控的数据，也就是我们要通过proxy来访问内部数据才会被监控到</span><br><span class="line"></span><br><span class="line">proxy.name = &apos;小红&apos; // 打印输出 &apos;set被监控到了&apos;</span><br><span class="line">proxy.name // 打印输出 &apos;get被监控到了&apos;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// Reflect经常和Proxy搭配使用</span><br><span class="line">// 比如我们上面的例子中</span><br><span class="line">let proxy = new Proxy(dog,&#123; </span><br><span class="line">    get(target,property)&#123; </span><br><span class="line">        console.log(&apos;get被监控到了&apos;)</span><br><span class="line">        return target[property]</span><br><span class="line">    &#125;,</span><br><span class="line">    set(target,property,value)&#123; </span><br><span class="line">        console.log(&apos;set被监控到了&apos;)</span><br><span class="line">        // target[property] = value </span><br><span class="line">        // 这里的target[property] = value 可以用下面的写法</span><br><span class="line">        Reflect.set(target,property,value)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// 那么我们该怎样实现深度的数据劫持呢？</span><br><span class="line">let dog = &#123;</span><br><span class="line">  name:&quot;小黄&quot;,</span><br><span class="line">  firend:&#123;</span><br><span class="line">    name:&quot;小红&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 我们首先写一个set方法，希望是通过这样来调用</span><br><span class="line">set(dog.firend,funtion(obj)&#123;</span><br><span class="line">    console.log(obj) // &#123; name:&quot;小红&quot; &#125;  回调函数中的obj代表的是dog.firend的对象</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// 实现</span><br><span class="line">let dog = &#123;</span><br><span class="line">  name:&quot;小黄&quot;,</span><br><span class="line">  firend:&#123;</span><br><span class="line">    name:&quot;小红&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function set(obj,callback)&#123;</span><br><span class="line">    let proxy = new Proxy(obj,&#123;</span><br><span class="line">        set(target,property,value)&#123;</span><br><span class="line">            target[property] = value</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    // 最后把proxy传给我们的回调函数</span><br><span class="line">    callback(proxy)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">set(dog.firend,function(obj)&#123;</span><br><span class="line">    console.log(obj) // &#123; name:&quot;小红&quot; &#125; 实际就是从set函数中传出来的proxy对象</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a>Symbol</h1><p>在js中，常见的数据类型有undefined null string number boolean object，而es6中，则新增了第七种数据类型symbol。  </p>
<p>symbol会生成一个独一无二的值，为常量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">let s1 = Symbol()</span><br><span class="line">let s2 = Symbol()</span><br><span class="line">console.log(s1 === s2) // false</span><br><span class="line"></span><br><span class="line">// 因为Symbol生成的是一个独一无二的值，为常量，一般是作为对象的属性</span><br><span class="line">let obj = &#123;</span><br><span class="line">  [s1]:1,</span><br><span class="line">  [s2]:2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(obj) // &#123; [Symbol()]: 1, [Symbol()]: 2 &#125;</span><br></pre></td></tr></table></figure>
<p>Symbol.for与Symbol差不多，但是Symbol.for会生成一个唯一的标识</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">let s1 = Symbol.for(&apos;foo&apos;)</span><br><span class="line">let s2 = Symbol.for(&apos;foo&apos;)</span><br><span class="line">console.log(s1 === s2) // true</span><br><span class="line"></span><br><span class="line">// 也可以通过Symbol.keyFor把标识找出来</span><br><span class="line">console.log(Symbol.keyFor(s1)) // foo</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h1><p>Array的常用方法有from reduce map forEach findIndex find every some filter includes等等</p>
<p>用法也很简单，我主要讲一下from和reduce。</p>
<h3 id="Array-from"><a href="#Array-from" class="headerlink" title="Array.from"></a>Array.from</h3><p>把伪数组(包括不含有迭代器的伪数组)转化为数组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 声明一个伪数组</span><br><span class="line">let likeArr = &#123; 0:1,1:2,2:3,length:3 &#125;</span><br><span class="line"></span><br><span class="line">// 转换为数组</span><br><span class="line">Array.from(likeArr) // [1,2,3]</span><br></pre></td></tr></table></figure>
<p>那么我们用前面所说的扩展运算符，能够把伪数组转为数组吗？<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 声明一个伪数组</span><br><span class="line">let likeArr = &#123; 0:1,1:2,2:3,length:3 &#125;</span><br><span class="line"></span><br><span class="line">// 用扩展运算符转换为数组</span><br><span class="line">let arr = [...likeArr] // 报错 likeArr is not iterable</span><br></pre></td></tr></table></figure></p>
<p>likeArr is not iterable意思是，likeArr这个伪数组没有迭代器， </p>
<p>那么可以看出，Array.from和…扩展运算符的区别了，  </p>
<p>Array.from可以将伪数组（包含没有迭代器的伪数组）转为数组，  </p>
<p>而…扩展运算符只能把拥有迭代器的伪数组转为数组，如arguments、map、set，  </p>
<p>那么我们如果想用…扩展运算符转为数组，该怎么办呢？<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 既然扩展运算符只能把有迭代器的伪数组转为数组，</span><br><span class="line">// 那么我们就给伪数组添加一个迭代器</span><br><span class="line">// 迭代器iterator需要一个generator生成器生成</span><br><span class="line">// 我们给这个伪数组新增一个[Symbol.iterator]的迭代器</span><br><span class="line">let likeArr = &#123; 0:1,1:2,2:3,length:3,[Symbol.iterator]:function *() &#123;</span><br><span class="line">  for(let i = 0;i &lt; this.length;i++)&#123;</span><br><span class="line">    yield this[i]</span><br><span class="line">  &#125;</span><br><span class="line">&#125; &#125;</span><br><span class="line"></span><br><span class="line">console.log([...likeArr]) // [1,2,3]</span><br></pre></td></tr></table></figure></p>
<h3 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1,2,3,4,5]</span><br><span class="line"></span><br><span class="line">// 参数一：前一个值</span><br><span class="line">// 参数二：下一个值（当前值）</span><br><span class="line">// 参数三：当前的索引</span><br><span class="line">// 参数四：arr数组</span><br><span class="line">let total = arr.reduce(function(prev,next,currentIndex,arr)&#123;</span><br><span class="line">    return prev + next</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">console.log(total) // 15</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">// 那么reduce是怎样一个运行流程呢？</span><br><span class="line">// 我们一步步拆解出来看</span><br><span class="line">let arr = [1,2,3,4,5]</span><br><span class="line"></span><br><span class="line">// arr会一直是[1,2,3,4,5]</span><br><span class="line">// 第一步：此时的prev为1，next为2，currentIndex为1</span><br><span class="line">let total = arr.reduce(function(prev,next,currentIndex,arr)&#123;</span><br><span class="line">    return prev + next // 1+2=3   并且把3当做下一次的prev</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 第二步：此时的prev为3，next为3，currentIndex为2</span><br><span class="line">let total = arr.reduce(function(prev,next,currentIndex,arr)&#123;</span><br><span class="line">    return prev + next // 3+3=6   并且把6当做下一次的prev</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 第三步：此时的prev为6，next为4，currentIndex为3</span><br><span class="line">let total = arr.reduce(function(prev,next,currentIndex,arr)&#123;</span><br><span class="line">    return prev + next // 6+4=10   并且把10当做下一次的prev</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 第四步：此时的prev为10，next为5，currentIndex为4</span><br><span class="line">let total = arr.reduce(function(prev,next,currentIndex,arr)&#123;</span><br><span class="line">    return prev + next // 10+5=15 最终结果会作为返回值返回</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>那我们自己实现一个reduce，看看是如何实现的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Array.prototype.myReduce = function (callback) &#123;</span><br><span class="line">  let prev = this[0]</span><br><span class="line">  for(let i = 0;i &lt; this.length-1;i++)&#123;</span><br><span class="line">    prev = callback(prev,this[i+1],i+1,this)</span><br><span class="line">  &#125;</span><br><span class="line">  return prev</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let arr = [1,2,3,4,5]</span><br><span class="line">let total = arr.myReduce(function(prev,next,currentIndex,arr)&#123;</span><br><span class="line">  console.log(prev,next)</span><br><span class="line">  return prev + next</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">console.log(total) // 15</span><br></pre></td></tr></table></figure></p>
<h3 id="map映射"><a href="#map映射" class="headerlink" title="map映射"></a>map映射</h3><p>可以把数组返回成一个映射后的数组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1,2,3].map(item =&gt; item+1)</span><br><span class="line">console.log(arr) // [2,3,4]</span><br></pre></td></tr></table></figure>
<h3 id="find"><a href="#find" class="headerlink" title="find"></a>find</h3><p>查找，查找到后不再继续查找，查找不到则返回undefined，内部返回true的话，则返回当前item，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1,2,3,4]</span><br><span class="line"></span><br><span class="line">let val = arr.find(item=&gt;item === 3)</span><br><span class="line">console.log(val) // 3</span><br></pre></td></tr></table></figure></p>
<h3 id="every"><a href="#every" class="headerlink" title="every"></a>every</h3><p>每个值是否满足条件，如果是则返回true，如果不是则返回false</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1,2,3,4]</span><br><span class="line">let isTrue = arr.every(item =&gt; &#123;</span><br><span class="line">    return item &gt; 0</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">console.log(isTrue) // true</span><br><span class="line"></span><br><span class="line">let isTrue2 = arr.every(item =&gt; &#123;</span><br><span class="line">    return item &gt; 2</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">console.log(isTrue2) // false</span><br></pre></td></tr></table></figure>
<h3 id="some"><a href="#some" class="headerlink" title="some"></a>some</h3><p>是否有其中一个值满足条件，如果是则返回true，如果不是则返回false</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1,2,3,4]</span><br><span class="line">let isTrue = arr.every(item =&gt; &#123;</span><br><span class="line">    return item &gt; 2</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">console.log(isTrue) // true</span><br><span class="line"></span><br><span class="line">let isTrue2 = arr.every(item =&gt; &#123;</span><br><span class="line">    return item &gt; 4</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">console.log(isTrue2) // false</span><br></pre></td></tr></table></figure>
<h3 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h3><p>过滤，在回调函数中返回的为false的话，相当于过滤掉当前项，返回一个过滤后的数组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1,2,3,4]</span><br><span class="line"></span><br><span class="line">let newArr = arr.filter(item=&gt;&#123;</span><br><span class="line">  return item &gt; 2</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">console.log(newArr) // [3,4]</span><br></pre></td></tr></table></figure>
<h3 id="includes"><a href="#includes" class="headerlink" title="includes"></a>includes</h3><p>基本和some一样</p>
<hr>
<h1 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h1><p>set是放不重复的项，也就是去重</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let set = new Set([1,2,3,4,3,2,1])</span><br><span class="line">console.log(set) // Set &#123; 1, 2, 3, 4 &#125;</span><br></pre></td></tr></table></figure>
<p>Set有几个常用的方法，add clear delete entries</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">// add</span><br><span class="line">let set = new Set([1,2,3,4,3,2,1])</span><br><span class="line">set.add(5)</span><br><span class="line">console.log(set) // Set &#123; 1, 2, 3, 4, 5 &#125;</span><br><span class="line"></span><br><span class="line">// 添加一个已有的值，则不会添加进去</span><br><span class="line">set.add(1)</span><br><span class="line">console.log(set) // Set &#123; 1, 2, 3, 4, 5 &#125;</span><br><span class="line"></span><br><span class="line">// delete</span><br><span class="line">set.delete(3)</span><br><span class="line">console.log(set) // Set &#123; 1, 2, 4, 5 &#125;</span><br><span class="line"></span><br><span class="line">// entries</span><br><span class="line">console.log(set.entries()) // SetIterator &#123; [ 1, 1 ],</span><br><span class="line">                                            [ 2, 2 ],</span><br><span class="line">                                            [ 4, 4 ], </span><br><span class="line">                                            [ 5, 5 ] &#125;</span><br><span class="line"></span><br><span class="line">// clear</span><br><span class="line">set.clear()</span><br><span class="line">console.log(set) // Set &#123;&#125;</span><br></pre></td></tr></table></figure>
<p>Set常用于去重（并集）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function distinct(arr1,arr2)&#123;</span><br><span class="line">    return [...new Set([...arr1,...arr2])]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let arr = distinct([1,2,3],[2,3,4,5])</span><br><span class="line">console.log(arr) // [1,2,3,4,5]</span><br></pre></td></tr></table></figure>
<p>求交集</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function intersect(arr1,arr2) &#123;</span><br><span class="line">  // 利用Set里的方法has，来判断new Set(arr2)中是否含有item，</span><br><span class="line">  // 如果含有，那么则是true，当为true时，filter函数则会保留该项</span><br><span class="line">  // 如果没有，则是false,当为false时，filter函数则不会保留该项</span><br><span class="line">  return arr1.filter(item =&gt; new Set(arr2).has(item))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(intersect([1,2,3],[2,3,4,5])) // [2,3]</span><br></pre></td></tr></table></figure>
<p>求差集</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function difference(arr1,arr2)&#123;</span><br><span class="line">    return arr1.filter(item =&gt; !new Set(arr2).has(item))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(difference([1,2,3],[2,3,4,5])) // [1]</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h1><p>也是集合，主要格式是 key =&gt; value，同样是不能放重复的key</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 如果放重复的key会怎样呢？会被覆盖</span><br><span class="line">let map = new Map()</span><br><span class="line">map.set(&apos;name&apos;,&apos;邵威儒&apos;)</span><br><span class="line">map.set(&apos;name&apos;,&apos;swr&apos;)</span><br><span class="line">console.log(map) // Map &#123; &apos;name&apos; =&gt; &apos;swr&apos; &#125;</span><br><span class="line"></span><br><span class="line">// 取的话用get</span><br><span class="line">map.get(&apos;name&apos;) // &apos;swr&apos;</span><br><span class="line"></span><br><span class="line">// 删的话用delete</span><br><span class="line">map.delete(&apos;name&apos;)</span><br><span class="line">console.log(map) // Map &#123;&#125;</span><br><span class="line"></span><br><span class="line">// 很多方法和set差不多</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">let map = new Map()</span><br><span class="line">map.set(&apos;name&apos;,&apos;邵威儒&apos;)</span><br><span class="line">map.set(&apos;age&apos;,28)</span><br><span class="line">// 一般使用for ... of ... 遍历</span><br><span class="line">for(let [key,value] of map.entries())&#123;</span><br><span class="line">    console.log(key,value) // name 邵威儒</span><br><span class="line">                           // age 28</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 也可以用forEach</span><br><span class="line">map.forEach(item =&gt; &#123;</span><br><span class="line">    console.log(item) // 邵威儒</span><br><span class="line">                      // 28</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>Set我用得最多的就是去重了，实际上Set Map我在开发中还是比较少会用到</p>
<hr>
<h1 id="Class类"><a href="#Class类" class="headerlink" title="Class类"></a>Class类</h1><p>核心还是继承，而Class我认为是es5面向对象的语法糖。</p>
<p>在看Class之前建议看一下js的面向对象 <a href="https://juejin.im/post/5b8a8724f265da435450c591" target="_blank" rel="noopener">https://juejin.im/post/5b8a8724f265da435450c591</a></p>
<p>看完后，我们开始进入es6的class</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">// 语法</span><br><span class="line">// 声明一个类</span><br><span class="line">Class Person&#123; </span><br><span class="line">    // 在constructor中写实例属性、方法</span><br><span class="line">    constructor()&#123; </span><br><span class="line">        this.name = &quot;邵威儒&quot; // 实例属性</span><br><span class="line">        this.say = function()&#123; // 实例方法</span><br><span class="line">            console.log(&quot;我是实例方法上的say&quot;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // 原型方法</span><br><span class="line">    eat()&#123;</span><br><span class="line">        console.log(&quot;我是原型方法上的eat&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">    // 静态方法 也会被继承</span><br><span class="line">    static myName()&#123; </span><br><span class="line">        return &quot;我是静态方法的myName&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // 在es6中静态属性不能这样写 static name = &quot;邵威儒&quot;  这样会报错</span><br><span class="line">    // 在es7中可以这样写static name = &quot;邵威儒&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let p = new Person() // new一个对象</span><br><span class="line">console.log(p.name) // 邵威儒</span><br><span class="line">p.eat() // 我是原型方法上的eat</span><br><span class="line">console.log(Person.myName()) // 我是静态方法的myName</span><br></pre></td></tr></table></figure>
<p>那么子类怎么继承父类呢？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">// 父类</span><br><span class="line">class Person&#123;</span><br><span class="line">    constructor()&#123;</span><br><span class="line">        this.name = &quot;swr&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    static myName()&#123;</span><br><span class="line">        return &quot;Person&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    eat()&#123;</span><br><span class="line">        console.log(&apos;eat&apos;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 子类</span><br><span class="line">// 子类Child继承父类Person</span><br><span class="line">// class Child extends Person实际上相当于</span><br><span class="line">// Child.prototype = Object.create(Person.prototype)</span><br><span class="line">// 打印出来可以看到</span><br><span class="line">// console.log(Child.prototype === Person.prototype) // false</span><br><span class="line">// console.log(Child.prototype.__proto__ === Person.prototype) // true</span><br><span class="line">class Child extends Person&#123;</span><br><span class="line">    constructor()&#123;</span><br><span class="line">        super() // 此处的super相当于Person.call(this)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>前面我说了Class就类型es5面向对象的语法糖，为什么这样说呢？</p>
<p>接下来我们看一下通过es5怎么模拟实现一个Class（可以用babel转一下，看看转为es5的代码是怎样的）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">let Child = (function()&#123;</span><br><span class="line">    // 这种闭包的写法，好处可以把作用域封闭起来 </span><br><span class="line">    // 在Child构造函数外写一系列变量</span><br><span class="line">    // 如 let name = &quot;邵威儒&quot;;let age = 28 等等…</span><br><span class="line">    function Child()&#123;</span><br><span class="line">        console.log(this) // 打印内部this，看看指向哪里</span><br><span class="line">    &#125;</span><br><span class="line">    return Child</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line">// 通过直接调用函数，看看什么情况</span><br><span class="line">console.log(Child()) // 此时里面的this是指向全局的</span><br><span class="line"></span><br><span class="line">// 通过new来生成对象</span><br><span class="line">console.log(new Child()) // 此时里面的this是指向这个new出来的新对象</span><br></pre></td></tr></table></figure>
<p>在es6中，不使用new来调用类，会报错 <code>Class constructor Child cannot be invoked without &#39;new&#39;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">class Child &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Child() // TypeError: Class constructor Child cannot be invoked without &apos;new&apos;</span><br></pre></td></tr></table></figure>
<p>也就是说，想在es5中，模拟类，那么没使用new来调用构造函数时，也要抛出一个错误，那么我们会想到类的校验方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// * 1.声明一个类的校验方法</span><br><span class="line">// *   参数一：指向的构造函数</span><br><span class="line">// *   参数二：被调用时，this的指向</span><br><span class="line">function _classCallCheck(constructor,instance) &#123;</span><br><span class="line">  // * 2.如果这个instance指向的不是constructor的话，意味着不是通过new来调用构造函数</span><br><span class="line">  if(!(instance instanceof constructor))&#123;</span><br><span class="line">    // * 3.不满足时，则抛出异常</span><br><span class="line">    throw TypeError(&quot;Class constructor Child cannot be invoked without &apos;new&apos;&quot;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let Child = (function()&#123;</span><br><span class="line">  function Child()&#123;</span><br><span class="line">    // * 4.在调用该构造函数的时候，先执行以下类的校验方法</span><br><span class="line">    _classCallCheck(Child,this)</span><br><span class="line">  &#125;</span><br><span class="line">  return Child</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line">// 不通过new调用时，会报错</span><br><span class="line">Child() // 报错 Class constructor Child cannot be invoked without &apos;new&apos;</span><br></pre></td></tr></table></figure>
<p>那么我们类上，有实例属性方法、原型属性方法、静态属性方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">function _classCallCheck(constructor,instance) &#123;</span><br><span class="line">  if(!(instance instanceof constructor))&#123;</span><br><span class="line">    throw TypeError(&quot;Class constructor Child cannot be invoked without &apos;new&apos;&quot;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// * 4.描述器 descriptor</span><br><span class="line">//     参数一：构造函数</span><br><span class="line">//     参数二：描述原型属性方法数组</span><br><span class="line">//     参数三：描述静态属性方法数组</span><br><span class="line">function _createClass(constructor,protoProperties,staticProperties) &#123;</span><br><span class="line">  // * 5.如果protoProperties数组有数组成员</span><br><span class="line">  if(protoProperties.length)&#123;</span><br><span class="line">    // * 6.遍历</span><br><span class="line">    for(let i = 0;i &lt; protoProperties.length;i++)&#123;</span><br><span class="line">      // * 7.通过Object.defineProperty把属性方法添加到constructor的原型对象上</span><br><span class="line">      Object.defineProperty(constructor.prototype,protoProperties[i].key,&#123;</span><br><span class="line">        // * 8.利用扩展运算符，把&#123;key:&quot;say&quot;,value:function()&#123;console.log(&quot;hello swr&quot;)&#125;&#125;展开</span><br><span class="line">        ...protoProperties[i]</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// * 1.实例属性方法、原型属性方法、静态属性方法</span><br><span class="line">//     在es6中，原型属性方法不是通过prototype实现的</span><br><span class="line">//     而是通过一个叫描述器的东西实现的</span><br><span class="line">let Child = (function()&#123;</span><br><span class="line">  function Child()&#123;</span><br><span class="line">    _classCallCheck(Child,this)</span><br><span class="line">    // * 2.实例属性方法还是写在构造函数内</span><br><span class="line">    this.name = &apos;邵威儒&apos;</span><br><span class="line">  &#125;</span><br><span class="line">  // * 3.描述器 descriptor</span><br><span class="line">  //     参数一：构造函数</span><br><span class="line">  //     参数二：描述原型属性方法</span><br><span class="line">  //     参数三：描述静态属性方法</span><br><span class="line">  _createClass(Child,</span><br><span class="line">    [</span><br><span class="line">      &#123;key:&quot;say&quot;,value:function()&#123;console.log(&quot;hello swr&quot;)&#125;&#125;,</span><br><span class="line">      &#123;key:&quot;myname&quot;,value:&quot;iamswr&quot;&#125;</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">      &#123;key:&quot;total&quot;,value:function()&#123;return 100&#125;&#125;</span><br><span class="line">    ])</span><br><span class="line">  return Child</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// * 9.最后我们new一个对象出来，并且调用原型属性方法，看能否调用成功</span><br><span class="line">let c = new Child()</span><br><span class="line">c.say() // &apos;hello swr&apos;    调用成功</span><br></pre></td></tr></table></figure>
<p>接下来，我们把静态方法，staticProperties也处理一下，<br>此时会发现，protoProperties和staticProperties都会遍历然后使用Object.defineProperty<br>那么我们封装一个方法进行处理<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">function _classCallCheck(constructor,instance) &#123;</span><br><span class="line">  if(!(instance instanceof constructor))&#123;</span><br><span class="line">    throw TypeError(&quot;Class constructor Child cannot be invoked without &apos;new&apos;&quot;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// * 1.封装一个方法，处理遍历和Object.defineProperty</span><br><span class="line">function _defineProperty(target,properties) &#123;</span><br><span class="line">  for (let i = 0; i &lt; properties.length; i++) &#123;</span><br><span class="line">    Object.defineProperty(target, properties[i].key, &#123;</span><br><span class="line">      ...properties[i]</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function _createClass(constructor,protoProperties,staticProperties) &#123;</span><br><span class="line">  if(protoProperties.length)&#123;</span><br><span class="line">    _defineProperty(constructor.prototype, protoProperties)</span><br><span class="line">  &#125;</span><br><span class="line">  // * 2.如果staticProperties数组有数组成员</span><br><span class="line">  if(staticProperties.length)&#123;</span><br><span class="line">    // * 3.静态方法需要添加在constructor</span><br><span class="line">    _defineProperty(constructor, staticProperties)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let Child = (function()&#123;</span><br><span class="line">  function Child()&#123;</span><br><span class="line">    _classCallCheck(Child,this)</span><br><span class="line">    this.name = &apos;邵威儒&apos;</span><br><span class="line">  &#125;</span><br><span class="line">  _createClass(Child,</span><br><span class="line">    [</span><br><span class="line">      &#123;key:&quot;say&quot;,value:function()&#123;console.log(&quot;hello swr&quot;)&#125;&#125;,</span><br><span class="line">      &#123;key:&quot;myname&quot;,value:&quot;iamswr&quot;&#125;</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">      &#123;key:&quot;total&quot;,value:function()&#123;return 100&#125;&#125;</span><br><span class="line">    ])</span><br><span class="line">  return Child</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">let c = new Child()</span><br><span class="line">c.say()</span><br><span class="line">// * 4.最后我们通过Child来调用静态方法</span><br><span class="line">console.log(Child.total())  // 100</span><br></pre></td></tr></table></figure></p>
<p>这样完成了一个雏形，但是还有最重要的继承还没实现，接下来我们实现继承。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">function _classCallCheck(constructor,instance) &#123;</span><br><span class="line">  if(!(instance instanceof constructor))&#123;</span><br><span class="line">    throw TypeError(&quot;Class constructor Parent cannot be invoked without &apos;new&apos;&quot;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function defineProperty(target,properties) &#123;</span><br><span class="line">  for (let i = 0; i &lt; properties.length; i++) &#123;</span><br><span class="line">    Object.defineProperty(constructor.prototype, properties[i].key, &#123;</span><br><span class="line">      ...properties[i]</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function _createClass(constructor,protoProperties,staticProperties) &#123;</span><br><span class="line">  if(protoProperties.length)&#123;</span><br><span class="line">    defineProperty(constructor.prototype, protoProperties)</span><br><span class="line">  &#125;</span><br><span class="line">  if(staticProperties.length)&#123;</span><br><span class="line">    defineProperty(constructor, staticProperties)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// * 6.继承方法</span><br><span class="line">function _inherits(subClass, superClass) &#123;</span><br><span class="line">  if (typeof superClass !== &quot;function&quot; &amp;&amp; superClass !== null) &#123;</span><br><span class="line">    throw new TypeError(&quot;Super expression must either be null or a function, not &quot; + typeof superClass);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // * 7.把子类的原型对象指向新的原型对象 组合寄生式继承 继承原型属性方法</span><br><span class="line">  subClass.prototype = Object.create(superClass &amp;&amp; superClass.prototype, &#123;</span><br><span class="line">    constructor: &#123;</span><br><span class="line">      value: subClass, // 把constructor指向子类</span><br><span class="line">      enumerable: false,</span><br><span class="line">      writable: true,</span><br><span class="line">      configurable: true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  // * 8.继承父类的静态方法</span><br><span class="line">  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function _possibleConstructorReturn(self, call) &#123;</span><br><span class="line">  if (!self) &#123;</span><br><span class="line">    throw new ReferenceError(&quot;this hasn&apos;t been initialised - super() hasn&apos;t been called&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  return call &amp;&amp; (typeof call === &quot;object&quot; || typeof call === &quot;function&quot;) ? call : self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// * 1.父类</span><br><span class="line">let Parent = (function()&#123;</span><br><span class="line">  function Parent()&#123;</span><br><span class="line">    _classCallCheck(Parent,this)</span><br><span class="line">    this.name = &apos;父类实例属性&apos;</span><br><span class="line">  &#125;</span><br><span class="line">  _createClass(Parent,</span><br><span class="line">    [</span><br><span class="line">      &#123;key:&quot;say&quot;,value:function()&#123;console.log(&quot;父类原型方法say&quot;)&#125;&#125;,</span><br><span class="line">      &#123;key:&quot;myname&quot;,value:&quot;父类原型属性myname&quot;&#125;</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">      &#123;key:&quot;total&quot;,value:function()&#123;return 100&#125;&#125;</span><br><span class="line">    ])</span><br><span class="line">  return Parent</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line">// * 2.子类</span><br><span class="line">let Child = (function (Parent) &#123; // * 4.这里接收传进的参数 父类</span><br><span class="line">  // * 5.写一个继承方法，继承原型属性方法和静态方法</span><br><span class="line">  _inherits(Child, Parent);</span><br><span class="line">  function Child() &#123;</span><br><span class="line">    _classCallCheck(Child, this)</span><br><span class="line">    // * 9.继承实例属性方法</span><br><span class="line">    return _possibleConstructorReturn(this, (Child.__proto__ || Object.getPrototypeOf(Child)).apply(this, arguments));</span><br><span class="line">  &#125;</span><br><span class="line">  return Child</span><br><span class="line">&#125;)(Parent) // * 3.在这里通过传参，把父类传进去</span><br><span class="line"></span><br><span class="line">let c = new Child()</span><br><span class="line">console.log(c.name) // &apos;父类实例属性&apos;</span><br></pre></td></tr></table></figure>
<p>这样就可以用es5模拟es6的class了，会发现其实es6的class是es5面向对象的一个语法糖，经过这样解剖一下源码实现，会对class有更深刻的理解。</p>
<p>还有个问题，我们在react中，会这样写class</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">class Parent&#123;</span><br><span class="line">    name = &quot;邵威儒&quot;</span><br><span class="line">&#125;</span><br><span class="line">// 在正常情况下会报错，但是因为平时项目是使用了babel插件</span><br><span class="line">// 会帮我们自动编译语法，这种写法目前还处于草案阶段</span><br><span class="line">// 上面的写法实际等价于下面的写法</span><br><span class="line">class Parent&#123;</span><br><span class="line">    constructor()&#123;</span><br><span class="line">        this.name = &quot;邵威儒&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="decorator-装饰器"><a href="#decorator-装饰器" class="headerlink" title="decorator 装饰器"></a>decorator 装饰器</h1><p>装饰器是用来装饰类的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">class Person &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function myFunction(target) &#123;</span><br><span class="line">  target[&apos;myName&apos;] = &quot;邵威儒&quot;</span><br><span class="line">&#125;</span><br><span class="line">myFunction(Person)</span><br><span class="line">console.log(Person[&apos;myName&apos;]) // 邵威儒</span><br></pre></td></tr></table></figure>
<p>这种写法，相当于给Person这个类添加了myName的属性<br>那么换成decorator该怎么写呢？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 在类前面写@myFunction</span><br><span class="line">@myFunction</span><br><span class="line">class Person &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function myFunction(target) &#123;</span><br><span class="line">  target[&apos;myName&apos;] = &quot;邵威儒&quot;</span><br><span class="line">&#125;</span><br><span class="line">// myFunction(Person)  这一步可以不写</span><br><span class="line">console.log(Person[&apos;myName&apos;]) // 邵威儒</span><br></pre></td></tr></table></figure>
<p>那么我们该怎么给myName传参呢？<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@myFunction(&apos;邵威儒&apos;)</span><br><span class="line">class Person &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function myFunction(value) &#123;</span><br><span class="line">  return function(target)&#123; // target代表的是类</span><br><span class="line">      target[&apos;myName&apos;] = value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">console.log(Person[&apos;myName&apos;]) // 邵威儒</span><br></pre></td></tr></table></figure></p>
<p>修饰符也可以修饰类的方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">class Person &#123;</span><br><span class="line">    @myFunction</span><br><span class="line">    say()&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 如果修饰的是方法</span><br><span class="line">// 参数一：是Person.prototype</span><br><span class="line">// 参数二：是say</span><br><span class="line">// 参数三：是描述器</span><br><span class="line">function myFunction(target,key,descriptor)&#123;</span><br><span class="line">    // 给这个类添加一个原型属性</span><br><span class="line">    Object.assign(target,&#123;name:&quot;邵威儒&quot;&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let p = new Person()</span><br><span class="line">console.log(p.name) // 邵威儒</span><br></pre></td></tr></table></figure></p>
<p>修饰符也可以修饰类的属性，比如我们有个不可修改的属性<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">class Person &#123;</span><br><span class="line">    @onlyRead</span><br><span class="line">    name = &apos;邵威儒&apos;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function onlyRead(target,key,descriptor)&#123;</span><br><span class="line">    descriptor.writable = false</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let p = new Person()</span><br><span class="line">p.name = &apos;swr&apos; // 报错，不能赋值</span><br></pre></td></tr></table></figure></p>
<p>decorator的用处很多，包括重写函数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function myFunction(target,key,descriptor)&#123;</span><br><span class="line">    // 拿出原本的函数</span><br><span class="line">    let fn = descriptor.value</span><br><span class="line">    // 并且在原有的fn上加上自己的业务逻辑，比如console.log(&apos;哈哈哈&apos;)</span><br><span class="line">    descriptor.value = function()&#123;</span><br><span class="line">        // 这里写我们需要加入的内容</span><br><span class="line">        console.log(&apos;哈哈哈&apos;)</span><br><span class="line">        // 这里执行原来的fn</span><br><span class="line">        fn()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>装饰器经常在react中使用~其实decorator是简写，逼格高一些。</p>
<hr>
<h4 id="es6其实还有很多新语法，但是我们平时并不常用，所以也没一一列举，可以到阮大神的es6看看"><a href="#es6其实还有很多新语法，但是我们平时并不常用，所以也没一一列举，可以到阮大神的es6看看" class="headerlink" title="es6其实还有很多新语法，但是我们平时并不常用，所以也没一一列举，可以到阮大神的es6看看~"></a>es6其实还有很多新语法，但是我们平时并不常用，所以也没一一列举，可以到阮大神的es6看看~</h4>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://qt92.github.io/2018/09/07/小邵教你玩转es6/" data-id="cjnhgouqx001alwloluocoa9c" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/优质文章分享/">优质文章分享</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-使用hexo搭建github-io博客" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/09/07/使用hexo搭建github-io博客/" class="article-date">
  <time datetime="2018-09-07T02:57:11.000Z" itemprop="datePublished">2018-09-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Hexo教程/">Hexo教程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/09/07/使用hexo搭建github-io博客/">使用hexo搭建github.io博客</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><blockquote>
<p>回顾一下我三年搭建博客的历程，最初是选择wordpress，Wordpress全部由php编写，数组库采用MySQL。优点：用户只需要将Wordpress的源代码复制到网站根目录下，然后访问网站，之后的安装操作全部在浏览器上完成。即使不是软件行业的人，也可以在几分钟之内完成安装工作。甚至很多虚拟主机供应商都提供了Wordpress的一键式安装工具。用户连上传文件的步骤都省了。缺点：项目太臃肿了，Wordpress耗损CPU严重，不容易操作，运行稍慢。尤其是后期文章数目较多的时候，想要登陆下网站的管理后台，心态简直是抓狂的。loading了好久，有时候还会失败，发一篇文章也很费劲，索性就不维护了。<br>后来在github网站上找到一个vue模板：<a href="https://github.com/ye63/vue-blog-use-github-issues" target="_blank" rel="noopener">github地址</a>和<a href="https://ye63.com/jy/" target="_blank" rel="noopener">demo预览</a>二次开发了一下，的确是实现了很多功能，也挺轻便的，样式也可以自定义，博客可以直接写在github的issue，很方便，用了三个月后才发现百度的搜索引擎居然只收录了首页，搜索引擎的基础爬虫的原理就是抓取你的url，然后获取你的html源代码并解析。 而你的页面通常用了vue等js的数据绑定机制来展示页面数据，爬虫获取到的html是你的模型页面而不是最终数据的渲染页面，所以说用js来渲染数据对seo并不友好。而且github api在国内访问速度也没有想象中那么快，可能是github的CDN被墙屏了。<br> 使用github.io可以搭建一个自己的博客,把静态文件项目托管到github上,可以写博客,可以使用markdown语法,也可以展示作品.灵活性高.但是有较大的难度,但是这对于一个熟悉git操作的前端开发工程师来说，都不算什么的。重点是hexo和github.io的域名和服务器都是<strong>免费</strong>的。当然也可以选择用自己的服务器和域名。</p>
</blockquote>
<h3 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h3><h4 id="安装-node-git，注册好github账号"><a href="#安装-node-git，注册好github账号" class="headerlink" title="安装 node,git，注册好github账号"></a>安装 node,git，注册好github账号</h4><p> (网站有很多教程，安装方法这里就不详细展开了，<strong>注意:github账号用户名一定不能有大写.</strong>)</p>
<h4 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo:"></a>安装hexo:</h4> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo</span><br></pre></td></tr></table></figure>
<h4 id="创建hexo文件夹"><a href="#创建hexo文件夹" class="headerlink" title="创建hexo文件夹:"></a>创建hexo文件夹:</h4><p>cmd窗口切换到对应的目录下,然后执行: <code>hexo init</code><br>也可以在 E:\hexo 下右键,选择git bash,在窗口中执行<code>hexo init</code><br>自动安装了需要的文件.</p>
<h4 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖:"></a>安装依赖:</h4><p>继续执行: <code>npm install</code></p>
<h4 id="完成本地安装"><a href="#完成本地安装" class="headerlink" title="完成本地安装:"></a>完成本地安装:</h4><p>继续在 <code>E:\hexo</code> 下执行:  <code>hexo generate</code></p>
<p>继续执行: <code>hexo server</code></p>
<p>然后在打开浏览器 <code>localhost:4000</code> ,就可以看到,本地已经安装好了.</p>
<h4 id="在github上创建博客仓库"><a href="#在github上创建博客仓库" class="headerlink" title="在github上创建博客仓库:"></a>在github上创建博客仓库:</h4><p><img src="https://user-images.githubusercontent.com/22697565/45201116-7ca05e00-b2a6-11e8-8e6c-8658ee49dc8f.png" alt="image"><br> 跳转的后如下填写:(其中Repository name的格式是 ‘用户名’.github.io  ),然后点创建仓库，Repository name必须和用户名（Owner）一致，不能有大写字母<br><img src="https://user-images.githubusercontent.com/22697565/45201238-1e27af80-b2a7-11e8-8eb4-ad31cfbaf6f6.png" alt="image"><br><img src="https://user-images.githubusercontent.com/22697565/45201369-a73ee680-b2a7-11e8-9c20-8a347e477f0b.png" alt="image"></p>
<h4 id="创建SSH-keys"><a href="#创建SSH-keys" class="headerlink" title="创建SSH keys"></a>创建SSH keys</h4><h5 id="监测是否有已经存在的SSH-keys"><a href="#监测是否有已经存在的SSH-keys" class="headerlink" title="监测是否有已经存在的SSH keys:"></a>监测是否有已经存在的SSH keys:</h5><p>打开 <code>git bash</code> 终端(可以在  E:\hexo 下右键打开,也可以直接在开始菜单里打开)</p>
<p>执行:  <code>$ ls -al ~/.ssh</code><br><img src="https://user-images.githubusercontent.com/22697565/45201445-f7b64400-b2a7-11e8-91d2-704c587815a6.png" alt="image"></p>
<h5 id="如果没有的话-就生成一个SSH-keys-写自己的邮箱"><a href="#如果没有的话-就生成一个SSH-keys-写自己的邮箱" class="headerlink" title="如果没有的话,就生成一个SSH keys: 写自己的邮箱"></a>如果没有的话,就生成一个SSH keys: 写自己的邮箱</h5><p><code>$ ssh-keygen -t rsa -C &quot;your_email@example.com&quot;</code></p>
<p>然后会出现:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file in which to save the key (/Users/you/.ssh/id_rsa):</span><br></pre></td></tr></table></figure></p>
<p>就是让你输入SSH keys要保存在哪里,一般不用改,就直接回车就好了.输入一个密码,这个密码后面会用到,所以要记住咯</p>
<h5 id="保存SSH-keys"><a href="#保存SSH-keys" class="headerlink" title="保存SSH keys:"></a>保存SSH keys:</h5><p>创建成功后,他会提示你SSH keys保存在哪里:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Your identification has been saved in /Users/you/.ssh/id_rsa.</span><br><span class="line"></span><br><span class="line"># Your public key has been saved in /Users/you/.ssh/id_rsa.pub.</span><br><span class="line"></span><br><span class="line"># The key fingerprint is:</span><br><span class="line"></span><br><span class="line"># 01:0f:f4:3b:ca:85:d6:17:a1:7d:f0:68:9d:f0:a2:db your_email@example.com</span><br></pre></td></tr></table></figure></p>
<h5 id="找到SSH-keys"><a href="#找到SSH-keys" class="headerlink" title="找到SSH keys:"></a>找到SSH keys:</h5><p>根据上一步里告诉你的路径,找到保存SSH keys的地方,我的是在 C:\Users\2000104591.ssh</p>
<p>其中 id_rsa.pub 就是SSH keys 如果为了防止以后找不到,可以把他们自己另存到其它地方</p>
<h4 id="为github仓库添加SSH-keys"><a href="#为github仓库添加SSH-keys" class="headerlink" title="为github仓库添加SSH keys"></a>为github仓库添加SSH keys</h4><p>然后把创建的id_rsa.pub里的内容复制到Key里去,Title部分随便填. 点击’Add key’</p>
<p>添加的过程中,还要再输入一次github的密码<br><img src="https://user-images.githubusercontent.com/22697565/45201608-c0946280-b2a8-11e8-94f4-f091267ce8d7.png" alt="image"></p>
<h4 id="配置-config-yml文件并发布"><a href="#配置-config-yml文件并发布" class="headerlink" title="配置_config.yml文件并发布:"></a>配置_config.yml文件并发布:</h4><p>在 <code>E:\hexo</code>(文件根目录下) 下,有一个文件叫 _config.yml ,打开它,拉到最底下,做如下修改:　</p>
<p>然后再执行:</p>
<p><code>hexo generate</code></p>
<p><code>hexo deploy</code></p>
<p>然后访问: <a href="https://ye63.github.io/" target="_blank" rel="noopener">https://ye63.github.io/</a> (用户名改成自己的),就可以看到了.</p>
<h4 id="快捷命令"><a href="#快捷命令" class="headerlink" title="快捷命令"></a>快捷命令</h4><h5 id="hexo-新建一篇文章给它添加分类和标签"><a href="#hexo-新建一篇文章给它添加分类和标签" class="headerlink" title="hexo 新建一篇文章给它添加分类和标签:"></a>hexo 新建一篇文章给它添加分类和标签:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new &quot;移动端限制input框只能输入数字&quot;</span><br></pre></td></tr></table></figure>
<h5 id="通过mou编辑器打开：添加tags和categories"><a href="#通过mou编辑器打开：添加tags和categories" class="headerlink" title="通过mou编辑器打开：添加tags和categories"></a>通过mou编辑器打开：添加tags和categories</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: title #文章標題</span><br><span class="line">date: 2016-06-01 23:47:44 #文章生成時間</span><br><span class="line">categories: &quot;Hexo教程&quot; #文章分類目錄 可以省略</span><br><span class="line">tags: #文章标签 可以省略</span><br><span class="line">     - 标签1</span><br><span class="line">     - 标签2</span><br><span class="line">description: #你對本頁的描述 可以省略</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<h5 id="发布"><a href="#发布" class="headerlink" title="发布"></a>发布</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br></pre></td></tr></table></figure>
<h5 id="创建新页面"><a href="#创建新页面" class="headerlink" title="创建新页面"></a>创建新页面</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page &quot;about&quot;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://qt92.github.io/2018/09/07/使用hexo搭建github-io博客/" data-id="cjnhgouq6000plwlonv1yibm5" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-javascript截取文件名的后缀" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/09/06/javascript截取文件名的后缀/" class="article-date">
  <time datetime="2018-09-06T11:22:37.000Z" itemprop="datePublished">2018-09-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/09/06/javascript截取文件名的后缀/">javascript截取文件名的后缀</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fileName=<span class="string">"text.png"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//带.的格式</span></span><br><span class="line"><span class="keyword">let</span> fileFormat=fileName.substring(fileName.lastIndexOf(<span class="string">'.'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不带.的格式</span></span><br><span class="line"><span class="keyword">let</span> fileFormat2=fileName.substring(fileName.lastIndexOf(<span class="string">'.'</span>)+<span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(fileFormat,fileFormat2)</span><br></pre></td></tr></table></figure>
<p><img src="https://user-images.githubusercontent.com/22697565/45154907-b8d2b080-b20b-11e8-944d-3adde64b69dd.png" alt="image"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://qt92.github.io/2018/09/06/javascript截取文件名的后缀/" data-id="cjnhgoupw000ilwlop5u342jf" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js代码片段/">js代码片段</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-移动端限制input框只能输入数字" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/09/03/移动端限制input框只能输入数字/" class="article-date">
  <time datetime="2018-09-03T08:56:58.000Z" itemprop="datePublished">2018-09-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/09/03/移动端限制input框只能输入数字/">移动端限制input框只能输入数字</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>html5 中，input 的 type 属性规定 input 元素的类型。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"value"</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>有很多选项，详细可以参考<a href="http://www.w3school.com.cn/html5/att_input_type.asp" target="_blank" rel="noopener">HTML 5 type 属性</a></p>
<p>但是在移动端，还要区分是安卓用户，还是ios用户，所以这样写：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"num_input"</span> <span class="attr">type</span>=<span class="string">'number'</span> <span class="attr">pattern</span>=<span class="string">"[0-9]*"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>在安卓端设置input类型为number，可限制键盘只输入数字，在ios端，要加入pattern验证输入字段的模式，才能限制数字输入。</p>
<p>另： <code>autofocus=&quot;autofocus&quot;</code>可以自动对焦。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://qt92.github.io/2018/09/03/移动端限制input框只能输入数字/" data-id="cjnhgour2001elwlo183k2wz2" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/html5/">html5</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-React-Js-微信分享封装" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/09/03/React-Js-微信分享封装/" class="article-date">
  <time datetime="2018-09-03T07:17:54.000Z" itemprop="datePublished">2018-09-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/09/03/React-Js-微信分享封装/">React Js 微信分享封装</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Introductions"><a href="#Introductions" class="headerlink" title="Introductions"></a>Introductions</h2><p>本篇文章给大家分享的内容是代码详解React Js 微信分享封装，有着一定的参考价值，有需要的朋友可以参考一下 话不多说，直接上源代码：</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="分享功能"><a href="#分享功能" class="headerlink" title="分享功能"></a>分享功能</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Fetch <span class="keyword">from</span> <span class="string">'./FetchIt'</span>;</span><br><span class="line"><span class="keyword">import</span> API_URL <span class="keyword">from</span> <span class="string">'./url'</span>;</span><br><span class="line"><span class="keyword">import</span> Share <span class="keyword">from</span> <span class="string">'./Share'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> wxUtils = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// 分享</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> getshareinfo?type=</span></span><br><span class="line"><span class="comment"> type :goods 课程详情 team 团详情</span></span><br><span class="line"><span class="comment"> id 课程id</span></span><br><span class="line"><span class="comment"> tid 团ID</span></span><br><span class="line"><span class="comment"> * @param config</span></span><br><span class="line"><span class="comment"> * @param shareInfo &#123;imgUrl,title,description,link&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">share2wx</span>(<span class="params">config, shareInfo</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> share = <span class="keyword">new</span> Share(&#123;</span><br><span class="line">        appid: config.appid, <span class="comment">// 必填，公众号的唯一标识</span></span><br><span class="line">        timestamp: config.timestamp, <span class="comment">// 必填，生成签名的时间戳</span></span><br><span class="line">        nonceStr: config.nonceStr, <span class="comment">// 必填，生成签名的随机串</span></span><br><span class="line">        signature: config.signature, <span class="comment">// 必填，签名</span></span><br><span class="line">    &#125;);</span><br><span class="line">    share.init(<span class="built_in">Object</span>.assign(&#123;&#125;, shareInfo));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getConfig</span>(<span class="params">shareInfo</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> href = <span class="built_in">window</span>.location.href.split(<span class="string">'#'</span>)[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">const</span> url = <span class="built_in">encodeURIComponent</span>(href <span class="comment">/*window.location.href*/</span>);</span><br><span class="line">    Fetch.get(<span class="string">`<span class="subst">$&#123;API_URL.mobile.signature_path&#125;</span>?url=<span class="subst">$&#123;url&#125;</span>`</span>).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">        share2wx(data, shareInfo);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @param shareInfo</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">wxUtils.share = <span class="function"><span class="keyword">function</span> (<span class="params">shareInfo</span>) </span>&#123;</span><br><span class="line">    getConfig(shareInfo);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// 分享结束</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 是否开启右上角Menu</span></span><br><span class="line"><span class="comment"> * @param open</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">wxUtils.optionMenu = <span class="function"><span class="keyword">function</span> (<span class="params">open = true</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (open) &#123;</span><br><span class="line">        openOptionMenu();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        disabledOptionMenu();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 是否禁用右上角</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">disabledOptionMenu</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> WeixinJSBridge === <span class="string">"undefined"</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">document</span>.addEventListener) &#123;</span><br><span class="line">            <span class="built_in">document</span>.addEventListener(<span class="string">'WeixinJSBridgeReady'</span>, onBridgeReady(<span class="literal">true</span>), <span class="literal">false</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">document</span>.attachEvent) &#123;</span><br><span class="line">            <span class="built_in">document</span>.attachEvent(<span class="string">'WeixinJSBridgeReady'</span>, onBridgeReady(<span class="literal">true</span>));</span><br><span class="line">            <span class="built_in">document</span>.attachEvent(<span class="string">'onWeixinJSBridgeReady'</span>, onBridgeReady(<span class="literal">true</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        onBridgeReady(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 开启menu</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">openOptionMenu</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> WeixinJSBridge === <span class="string">"undefined"</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">document</span>.addEventListener) &#123;</span><br><span class="line">            <span class="built_in">document</span>.addEventListener(<span class="string">'WeixinJSBridgeReady'</span>, onBridgeReady(<span class="literal">false</span>), <span class="literal">false</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">document</span>.attachEvent) &#123;</span><br><span class="line">            <span class="built_in">document</span>.attachEvent(<span class="string">'WeixinJSBridgeReady'</span>, onBridgeReady(<span class="literal">false</span>));</span><br><span class="line">            <span class="built_in">document</span>.attachEvent(<span class="string">'onWeixinJSBridgeReady'</span>, onBridgeReady(<span class="literal">false</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        onBridgeReady(<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onBridgeReady</span>(<span class="params">disable = true</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> WeixinJSBridge !== <span class="string">"undefined"</span>) WeixinJSBridge.call(disable ? <span class="string">'hideOptionMenu'</span> : <span class="string">'showOptionMenu'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 隐藏微信网页底部的导航栏</span></span><br><span class="line"><span class="comment"> * @param disable</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">wxUtils.disabledToolbar = <span class="function"><span class="keyword">function</span> (<span class="params">disable = true</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.addEventListener(<span class="string">'WeixinJSBridgeReady'</span>, <span class="function"><span class="keyword">function</span> <span class="title">onBridgeReady</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 通过下面这个API隐藏底部导航栏</span></span><br><span class="line">        WeixinJSBridge.call(disable ? <span class="string">'hideToolbar'</span> : <span class="string">'showToolbar'</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> wxUtils;</span><br></pre></td></tr></table></figure>
<h3 id="分享配置"><a href="#分享配置" class="headerlink" title="分享配置"></a>分享配置</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 分享</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Share</span>(<span class="params">config</span>) </span>&#123;</span><br><span class="line">    wx.config(&#123;</span><br><span class="line">        debug: <span class="literal">false</span>, <span class="comment">// 开启调试模式</span></span><br><span class="line">        appId: config.appid, <span class="comment">// 必填，公众号的唯一标识</span></span><br><span class="line">        timestamp: config.timestamp, <span class="comment">// 必填，生成签名的时间戳</span></span><br><span class="line">        nonceStr: config.nonceStr, <span class="comment">// 必填，生成签名的随机串</span></span><br><span class="line">        signature: config.signature, <span class="comment">// 必填，签名，见附录1</span></span><br><span class="line">        jsApiList: [<span class="string">'onMenuShareTimeline'</span>, <span class="string">'onMenuShareAppMessage'</span>, <span class="string">'onMenuShareWeibo'</span>], <span class="comment">// 必填，需要使用的JS接口列表，所有JS接口列表见附录2</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Share.prototype = &#123;</span><br><span class="line">    <span class="keyword">constructor</span>: Share,</span><br><span class="line"></span><br><span class="line">    init(config) &#123;</span><br><span class="line">        <span class="keyword">this</span>.imgUrl = config.imgUrl;</span><br><span class="line">        <span class="keyword">this</span>.link = config.link;</span><br><span class="line">        <span class="comment">// this.musicPath = config.musicPath;</span></span><br><span class="line">        <span class="keyword">this</span>.description = config.description;</span><br><span class="line">        <span class="keyword">this</span>.title = config.title;</span><br><span class="line"></span><br><span class="line">        wx.ready(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// if (this.musicPath) &#123;</span></span><br><span class="line">            <span class="comment">//     document.getElementById('musicIcon').play();</span></span><br><span class="line">            <span class="comment">// &#125;</span></span><br><span class="line">            <span class="keyword">this</span>.toFriend();</span><br><span class="line">            <span class="keyword">this</span>.toTimeline();</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        wx.error(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;res&#125;</span>`</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    toFriend() &#123;</span><br><span class="line">        wx.onMenuShareAppMessage(&#123;</span><br><span class="line">            imgUrl: <span class="keyword">this</span>.imgUrl,</span><br><span class="line">            link: <span class="keyword">this</span>.link,</span><br><span class="line">            title: <span class="keyword">this</span>.title,</span><br><span class="line">            desc: <span class="keyword">this</span>.description,</span><br><span class="line">            success: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="comment">// 用户确认分享后执行的回调函数</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    toTimeline() &#123;</span><br><span class="line">        wx.onMenuShareTimeline(&#123;</span><br><span class="line">            imgUrl: <span class="keyword">this</span>.imgUrl,</span><br><span class="line">            link: <span class="keyword">this</span>.link,</span><br><span class="line">            title: <span class="keyword">this</span>.title,</span><br><span class="line">            desc: <span class="keyword">this</span>.description,</span><br><span class="line">            success: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="comment">// 用户确认分享后执行的回调函数</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Share;</span><br></pre></td></tr></table></figure>
<h3 id="开启分享"><a href="#开启分享" class="headerlink" title="开启分享"></a>开启分享</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//开启分享</span></span><br><span class="line">BaseComponent.wxUtils.optionMenu(<span class="literal">true</span>);</span><br><span class="line">BaseComponent.wxUtils.share(&#123;</span><br><span class="line">    imgUrl: activityData.sharePicUrl,</span><br><span class="line">    title: activityData.shareTitle,</span><br><span class="line">    description: activityData.shareContent,</span><br><span class="line">    link: url,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://qt92.github.io/2018/09/03/React-Js-微信分享封装/" data-id="cjnhgoup2000dlwlofhpizrvi" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react/">react</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-错误码：events-js-183-throw-er-Unhandled-error-event—解决办法" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/08/30/错误码：events-js-183-throw-er-Unhandled-error-event—解决办法/" class="article-date">
  <time datetime="2018-08-30T14:48:30.000Z" itemprop="datePublished">2018-08-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/08/30/错误码：events-js-183-throw-er-Unhandled-error-event—解决办法/">错误码：events.js:183 throw er; // Unhandled &#39;error&#39; event—解决办法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="控制台报错："><a href="#控制台报错：" class="headerlink" title="控制台报错："></a>控制台报错：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Hash: 78f0873c3eb47a64bfae</span><br><span class="line">Version: webpack 1.14.0</span><br><span class="line">Time: 16ms</span><br><span class="line">webpack: Compiled successfully.</span><br><span class="line">events.js:183</span><br><span class="line">      throw er; // Unhandled &apos;error&apos; event</span><br><span class="line">      ^</span><br><span class="line"></span><br><span class="line">Error: listen EADDRINUSE 127.0.0.1:8080</span><br><span class="line">    at Object._errnoException (util.js:1022:11)</span><br><span class="line">    at _exceptionWithHostPort (util.js:1044:20)</span><br><span class="line">    at Server.setupListenHandle [as _listen2] (net.js:1367:14)</span><br><span class="line">    at listenInCluster (net.js:1408:12)</span><br><span class="line">    at GetAddrInfoReqWrap.doListen [as callback] (net.js:1517:7)</span><br><span class="line">    at GetAddrInfoReqWrap.onlookup [as oncomplete] (dns.js:97:10)</span><br><span class="line">npm ERR! code ELIFECYCLE</span><br><span class="line">npm ERR! errno 1</span><br><span class="line">npm ERR! webpack-demos@1.0.0 dev: `webpack-dev-server --devtool eval --progress --colors`</span><br><span class="line">npm ERR! Exit status 1</span><br><span class="line">npm ERR!</span><br><span class="line">npm ERR! Failed at the webpack-demos@1.0.0 dev script.</span><br><span class="line">npm ERR! This is probably not a problem with npm. There is likely additional logging output above.</span><br><span class="line"></span><br><span class="line">npm ERR! A complete log of this run can be found in:</span><br><span class="line">npm ERR!     C:\Users\qian\AppData\Roaming\npm-cache\_logs\2018-08-30T14_46_37_546Z-debug.log</span><br></pre></td></tr></table></figure>
<h4 id="错误原因："><a href="#错误原因：" class="headerlink" title="错误原因："></a>错误原因：</h4><p>端口号被占用</p>
<h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><p>1.Win+R,cmd查询使用的端口号是否被占用：<br>netstat  -aon|findstr  “8080”<br>按回车显示占用8080端口对应的程序的PID号；<br>2.根据PID号找到对应的程序：继续输入命令：<br>tasklist|findstr “15008”<br>按回车后显示出占用该端口的程序；<br>3.按快捷键“Ctrl+Shift+Esc”调出Windows任务管理器，根据PID/<br>程序对应名称结束该程序进程即可。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://qt92.github.io/2018/08/30/错误码：events-js-183-throw-er-Unhandled-error-event—解决办法/" data-id="cjnhgourc001llwlo574aod9a" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/npm/">npm</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-合并数组的相同的key值，并且计算相同key值的个数" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/08/30/合并数组的相同的key值，并且计算相同key值的个数/" class="article-date">
  <time datetime="2018-08-30T07:33:19.000Z" itemprop="datePublished">2018-08-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/08/30/合并数组的相同的key值，并且计算相同key值的个数/">合并数组的相同的key值，并且计算相同key值的个数</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="需求："><a href="#需求：" class="headerlink" title="需求："></a>需求：</h4><p>合并数组的相同的key值，并且计算相同key值的个数</p>
<h4 id="场景："><a href="#场景：" class="headerlink" title="场景："></a>场景：</h4><p>根据list数组的每一项的key值coupon_sn合并数组，并且计数</p>
<h4 id="js代码"><a href="#js代码" class="headerlink" title="js代码"></a>js代码</h4><h5 id="json数组："><a href="#json数组：" class="headerlink" title="json数组："></a>json数组：</h5><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">let list = [&#123;</span><br><span class="line">	"id": 5899,</span><br><span class="line">	"is_use": 0,</span><br><span class="line">	"use_time": null,</span><br><span class="line">	"expired_time": "2018-12-31 00:00:00",</span><br><span class="line">	"coupon": &#123;</span><br><span class="line">		"coupon_sn": "1",</span><br><span class="line">		"name": "满减",</span><br><span class="line">		"type": 2,</span><br><span class="line">		"count": 99993,</span><br><span class="line">		"receive_count": 6,</span><br><span class="line">		"is_fare": 0,</span><br><span class="line">		"available_money": "2000.00",</span><br><span class="line">		"reduce_money": "100.00",</span><br><span class="line">		"discount": "1.000",</span><br><span class="line">		"receive_start_time": "2018-07-27 00:00:00",</span><br><span class="line">		"receive_end_time": "2020-12-31 00:00:00",</span><br><span class="line">		"info": "",</span><br><span class="line">		"created_at": "2018-07-27 21:22:51",</span><br><span class="line">		"restriction_description": "仅限非板材使用"</span><br><span class="line">	&#125;</span><br><span class="line">&#125;, &#123;</span><br><span class="line">	"id": 5899,</span><br><span class="line">	"is_use": 0,</span><br><span class="line">	"use_time": null,</span><br><span class="line">	"expired_time": "2018-12-31 00:00:00",</span><br><span class="line">	"coupon": &#123;</span><br><span class="line">		"coupon_sn": "2",</span><br><span class="line">		"name": "满减",</span><br><span class="line">		"type": 2,</span><br><span class="line">		"count": 99993,</span><br><span class="line">		"receive_count": 6,</span><br><span class="line">		"is_fare": 0,</span><br><span class="line">		"available_money": "2000.00",</span><br><span class="line">		"reduce_money": "100.00",</span><br><span class="line">		"discount": "1.000",</span><br><span class="line">		"receive_start_time": "2018-07-27 00:00:00",</span><br><span class="line">		"receive_end_time": "2020-12-31 00:00:00",</span><br><span class="line">		"info": "",</span><br><span class="line">		"created_at": "2018-07-27 21:22:51",</span><br><span class="line">		"restriction_description": "仅限非板材使用"</span><br><span class="line">	&#125;</span><br><span class="line">&#125;, &#123;</span><br><span class="line">	"id": 5899,</span><br><span class="line">	"is_use": 0,</span><br><span class="line">	"use_time": null,</span><br><span class="line">	"expired_time": "2018-12-31 00:00:00",</span><br><span class="line">	"coupon": &#123;</span><br><span class="line">		"coupon_sn": "2",</span><br><span class="line">		"name": "满减",</span><br><span class="line">		"type": 2,</span><br><span class="line">		"count": 99993,</span><br><span class="line">		"receive_count": 6,</span><br><span class="line">		"is_fare": 0,</span><br><span class="line">		"available_money": "2000.00",</span><br><span class="line">		"reduce_money": "100.00",</span><br><span class="line">		"discount": "1.000",</span><br><span class="line">		"receive_start_time": "2018-07-27 00:00:00",</span><br><span class="line">		"receive_end_time": "2020-12-31 00:00:00",</span><br><span class="line">		"info": "",</span><br><span class="line">		"created_at": "2018-07-27 21:22:51",</span><br><span class="line">		"restriction_description": "仅限非板材使用"</span><br><span class="line">	&#125;</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>
<h5 id="js代码-1"><a href="#js代码-1" class="headerlink" title="js代码"></a>js代码</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">let</span> hash = &#123;</span><br><span class="line">	coupon: &#123;&#125;,</span><br><span class="line">&#125;, i = <span class="number">0</span>, res = [];</span><br><span class="line">list.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item </span>) </span>&#123;</span><br><span class="line">	<span class="keyword">let</span> coupon_sn = item.coupon.coupon_sn;</span><br><span class="line">	<span class="keyword">if</span> (hash[coupon_sn]) &#123;</span><br><span class="line">		<span class="keyword">if</span> (!res[hash[coupon_sn] - <span class="number">1</span>].count) &#123;</span><br><span class="line">			res[hash[coupon_sn] - <span class="number">1</span>].count = <span class="number">1</span></span><br><span class="line">		&#125;</span><br><span class="line">		res[hash[coupon_sn] - <span class="number">1</span>].count += <span class="number">1</span></span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		hash[coupon_sn] = ++i &amp;&amp; res.push(&#123;</span><br><span class="line">			<span class="string">"count"</span>: <span class="number">1</span>,</span><br><span class="line">			<span class="string">"id"</span>: item.id,</span><br><span class="line">			<span class="string">"is_use"</span>: item.is_use,</span><br><span class="line">			<span class="string">"use_time"</span>: item.use_time,</span><br><span class="line">			<span class="string">"expired_time"</span>: item.expired_time,</span><br><span class="line">			<span class="string">"coupon"</span>: item.coupon</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(res);</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://qt92.github.io/2018/08/30/合并数组的相同的key值，并且计算相同key值的个数/" data-id="cjnhgouqo0012lwlokeeht0zl" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js代码片段/">js代码片段</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-怎么把数组倒置，又不影响原来数组，reverse不行" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/08/18/怎么把数组倒置，又不影响原来数组，reverse不行/" class="article-date">
  <time datetime="2018-08-18T15:33:00.000Z" itemprop="datePublished">2018-08-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/08/18/怎么把数组倒置，又不影响原来数组，reverse不行/">怎么把数组倒置，又不影响原来数组，reverse不行</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="情景："><a href="#情景：" class="headerlink" title="情景："></a>情景：</h3><p>怎么把数组倒置，又不影响原来数组，reverse不行，会把原数组也给反过来。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">"1"</span>,<span class="string">"2"</span>,<span class="string">"3"</span>,<span class="string">"4"</span>];</span><br><span class="line"><span class="keyword">var</span> bbb = arr.reverse()</span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">//["4", "3", "2", "1"]</span></span><br><span class="line"><span class="built_in">console</span>.log(bbb); <span class="comment">//["4", "3", "2", "1"]</span></span><br></pre></td></tr></table></figure></p>
<p>直接改的话bbb和arr指向是同一个数组对象。reverse改变的是数组对象，a指向它，所以改变了，要改变就要让其指向不同</p>
<h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">"1"</span>,<span class="string">"2"</span>,<span class="string">"3"</span>,<span class="string">"4"</span>];</span><br><span class="line"><span class="comment">//列举4个解决方案</span></span><br><span class="line"><span class="keyword">var</span> bbb = [...arr].reverse() <span class="comment">//方法1</span></span><br><span class="line"><span class="keyword">var</span> bbb = [].concat(arr).reverse()  <span class="comment">//方法2</span></span><br><span class="line"><span class="keyword">var</span> bbb = <span class="built_in">Object</span>.assign([],arr).reverse()<span class="comment">//方法3</span></span><br><span class="line"><span class="keyword">var</span> bbb = arr.slice().reverse()<span class="comment">//方法4</span></span><br><span class="line"><span class="built_in">console</span>.log(arr); </span><br><span class="line"><span class="built_in">console</span>.log(bbb);</span><br></pre></td></tr></table></figure>
<p> ES6语法很方便~</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://qt92.github.io/2018/08/18/怎么把数组倒置，又不影响原来数组，reverse不行/" data-id="cjnhgour7001ilwlo2ayfc4br" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js代码片段/">js代码片段</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-frank的前端开发规范（逐步完善）" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/04/19/frank的前端开发规范（逐步完善）/" class="article-date">
  <time datetime="2018-04-19T11:49:01.000Z" itemprop="datePublished">2018-04-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/04/19/frank的前端开发规范（逐步完善）/">frank的前端开发规范（逐步完善）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="js方法注释规范"><a href="#js方法注释规范" class="headerlink" title="js方法注释规范"></a>js方法注释规范</h3><h5 id="规范的注释很重要"><a href="#规范的注释很重要" class="headerlink" title="规范的注释很重要"></a>规范的注释很重要</h5><p>代码是写给人看的，顺便给机器运行，多谢注释可以增加代码的可读性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment">**************</span></span><br><span class="line"><span class="comment"> * @func 教师端请假功能 ;</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; token 教师端头部的token;</span></span><br><span class="line"><span class="comment"> * @param &#123;string&#125; a - 参数a;</span></span><br><span class="line"><span class="comment"> * @param &#123;number&#125; b=1 - 参数b默认值为1;</span></span><br><span class="line"><span class="comment"> * @param &#123;string&#125; c=1 - 参数c有两种支持的取值&lt;/br&gt;1—表示x&lt;/br&gt;2—表示xx;</span></span><br><span class="line"><span class="comment"> * @param &#123;object&#125; d - 参数d为一个对象;</span></span><br><span class="line"><span class="comment"> * @param &#123;string&#125; d.e - 参数d的e属性;</span></span><br><span class="line"><span class="comment"> * @param &#123;string&#125; d.f - 参数d的f属性;</span></span><br><span class="line"><span class="comment"> * @param &#123;object[]&#125; g - 参数g为一个对象数组;</span></span><br><span class="line"><span class="comment"> * @param &#123;string&#125; g.h - 参数g数组中一项的h属性;</span></span><br><span class="line"><span class="comment"> * @param &#123;string&#125; g.i - 参数g数组中一项的i属性;</span></span><br><span class="line"><span class="comment"> * @param &#123;string&#125; [j] - 参数j是一个可选参数;</span></span><br><span class="line"><span class="comment"> * @description  2018年4月19日被frank开发于dev_sprint65分支，</span></span><br><span class="line"><span class="comment"> *   XX年XX月被XX在xx分支修改（原因或者修改的功能）;</span></span><br><span class="line"><span class="comment"> ****************/</span></span><br></pre></td></tr></table></figure>
<h3 id="变量命名规范"><a href="#变量命名规范" class="headerlink" title="变量命名规范"></a>变量命名规范</h3><p>1.标准变量命名使用驼峰式命名           <code>eg. let thisIsMyName;</code><br>2.常量全部大写，并使用下划线连接       <code>eg.  const MAX_COUNT = 10;</code></p>
<h3 id="项目规范"><a href="#项目规范" class="headerlink" title="项目规范"></a>项目规范</h3><p><strong>变量声明尽量提在函数首部，用一个var声明，不允许出现连着的两个var声明(也包括let，const)</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomethingWithItems</span>(<span class="params">items</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// use one var</span></span><br><span class="line">    <span class="keyword">var</span> value = <span class="number">10</span>,</span><br><span class="line">        result = value + <span class="number">10</span>,</span><br><span class="line">        i,</span><br><span class="line">        len;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>, len = items.length; i &lt; len; i++) &#123;</span><br><span class="line">        result += <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>undefind使用规范（永远不要直接使用undefined进行变量判断，使用typeof和字符串’undefined’对变量进行判断。）</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// not good</span></span><br><span class="line"><span class="keyword">if</span> (person === <span class="literal">undefined</span>) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> person === <span class="string">'undefined'</span>) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>用’===’和’!==’代替’==’, ‘!=’</strong><br><strong>使用对象的属性简写</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> job = <span class="string">'FrontEnd'</span></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> item = &#123;</span><br><span class="line">  job: job</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> item = &#123;</span><br><span class="line">  job</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>使用拓展运算符 … 复制数组</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> items = []</span><br><span class="line"><span class="keyword">const</span> itemsCopy = []</span><br><span class="line"><span class="keyword">const</span> len = items.length</span><br><span class="line"><span class="keyword">let</span> i</span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">  itemsCopy[i] = items[i]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">itemsCopy = [...items]</span><br></pre></td></tr></table></figure></p>
<p><strong>render使用</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">render: <span class="function">(<span class="params">h, params</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> h(<span class="string">'div'</span>, [</span><br><span class="line">        h(<span class="string">'span'</span>, &#123;</span><br><span class="line">            attrs: &#123;</span><br><span class="line">                class: "table_details"</span><br><span class="line">            &#125;,</span><br><span class="line">            on: &#123;</span><br><span class="line">                click: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">this</span>.edit(params.index)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,),</span><br><span class="line">        h(<span class="string">'span'</span>, &#123;</span><br><span class="line">            attrs: &#123;</span><br><span class="line">                class: "table_continue"</span><br><span class="line">            &#125;,</span><br><span class="line">            on: &#123;</span><br><span class="line">                click: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">this</span>.show(params.index)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,),</span><br><span class="line">        h(<span class="string">'span'</span>, &#123;</span><br><span class="line">            attrs: &#123;</span><br><span class="line">                class: "table_more no_border_right"</span><br><span class="line">            &#125;,</span><br><span class="line">            on: &#123;</span><br><span class="line">                click: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">this</span>.remove(params.row.id)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,),</span><br><span class="line">        h(<span class="string">'Poptip'</span>, &#123;</span><br><span class="line">            props: &#123;</span><br><span class="line">                title:<span class="string">"项目变更"</span>,</span><br><span class="line">                content:<span class="string">"项目迁出"</span>,</span><br><span class="line">                placement:<span class="string">"bottom-end"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            on: &#123;</span><br><span class="line">                <span class="string">'on-ok'</span>: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, [</span><br><span class="line">            h(<span class="string">'span'</span>, &#123;</span><br><span class="line">                attrs: &#123;</span><br><span class="line">                    class: "table_more no_border_right"</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        ])</span><br><span class="line">    ])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>文档：有时间整理一下<a href="http://taobaofed.org/blog/2017/01/05/writing-readable-code/" target="_blank" rel="noopener">http://taobaofed.org/blog/2017/01/05/writing-readable-code/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://qt92.github.io/2018/04/19/frank的前端开发规范（逐步完善）/" data-id="cjnhgouou0009lwlo8pos4565" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/开发规范/">开发规范</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo教程/">Hexo教程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/优质文章分享/">优质文章分享</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/">前端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端周刊/">前端周刊</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/好文分享/">好文分享</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/html5/">html5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js代码片段/">js代码片段</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/">node</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/">react</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/优质文章分享/">优质文章分享</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/分享/">分享</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端自动化/">前端自动化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/开发规范/">开发规范</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/html5/" style="font-size: 10px;">html5</a> <a href="/tags/js代码片段/" style="font-size: 20px;">js代码片段</a> <a href="/tags/node/" style="font-size: 10px;">node</a> <a href="/tags/npm/" style="font-size: 10px;">npm</a> <a href="/tags/react/" style="font-size: 16.67px;">react</a> <a href="/tags/优质文章分享/" style="font-size: 13.33px;">优质文章分享</a> <a href="/tags/分享/" style="font-size: 16.67px;">分享</a> <a href="/tags/前端自动化/" style="font-size: 10px;">前端自动化</a> <a href="/tags/开发规范/" style="font-size: 10px;">开发规范</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/10/20/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2018/09/30/前端开发最全面试题/">前端开发最全面试题</a>
          </li>
        
          <li>
            <a href="/2018/09/28/redux入门/">redux入门</a>
          </li>
        
          <li>
            <a href="/2018/09/21/JS 数组克隆方法总结/">JS 数组克隆方法总结</a>
          </li>
        
          <li>
            <a href="/2018/09/21/前端周刊-2018年09月第3周/">前端周刊-2018年09月第3周</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 QT<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>